;/*FB_PKG_DELIM*/

__d("LoggedOutLoginSignupBarTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:LoggedOutLoginSignupBarLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:LoggedOutLoginSignupBarLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:LoggedOutLoginSignupBarLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsPrimaryCtaReg=function(a){this.$1.is_primary_cta_reg=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};return a}();c={event:!0,is_primary_cta_reg:!0,surface:!0};f["default"]=a}),66);
__d("MAsyncSignal",["URI","ZeroRewrites","eventsMixinDeprecated","memoize","setTimeout"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.data=b||{},this.uri=a}var b=a.prototype;b.send=function(){var a=new Image(),b=d("ZeroRewrites").rewriteURI(new(h||(h=c("URI")))(this.uri));for(var e in this.data)b.addQueryData(e,this.data[e]);a.src=b.toString();if(this.handler){var f=c("memoize")(this.handler);this.timeout&&c("setTimeout")(f,this.timeout);a.onload=a.onerror=function(){f()}}else a.onload=this.invoke.bind(this,"load"),a.onerror=this.invoke.bind(this,"fail"),this.timeout&&c("setTimeout")(this.invoke.bind(this,"timeout"),this.timeout);return this};b.setHandler=function(a){this.handler=a;return this};b.setTimeout=function(a){this.timeout=a;return this};return a}();c("eventsMixinDeprecated")(a,["load","fail","timeout"]);Object.assign(a.prototype,{uri:null});g["default"]=a}),98);
__d("XTaggingCounterController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/tagging/counter/",{event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("MTaggingCounter",["MAsyncSignal","XTaggingCounterController"],(function(a,b,c,d,e,f){a={logEvent:function(a,c){c=b("XTaggingCounterController").getURIBuilder().setEnum("event",a).getURI();new(b("MAsyncSignal"))(c).send()}};e.exports=a}),null);
__d("XPlacesUpdateLocationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/places/location_update/",{json_location:{type:"String"},source:{type:"Enum",defaultValue:"msite_unknown",enumType:1}})}),null);
__d("MLocationPrompt",["MDOM","MRequest","MTaggingCounter","Stratcom","WebStorage","XPlacesUpdateLocationController"],(function(a,b,c,d,e,f,g){var h,i=["latitude","longitude","accuracy","altitude","altitudeAccuracy","heading","speed"],j={enableHighAccuracy:!0,timeout:6e4,maximumAge:3e5},k=6e4;a=function(){a.init=function(b,c,d,e){return new a(b,c,d,e)};a.getCoords=function(){return a.coords};a.isLocationAvailable=function(){return a.locationAvailable};function a(b,e,f,g){var i=this;this.$2=function(){d("MTaggingCounter").logEvent("geo_panel_accept"),i.$1(!0)};this.$3=function(){a.locationAvailable=!1,d("MTaggingCounter").logEvent("geo_panel_deny"),d("MDOM").hide(i.container),c("Stratcom").invoke("m:jewel-set:notifications-jewel:refresh-flyout"),c("Stratcom").invoke(a.STRATCOM_DENY)};this.$5=function(b){a.locationAvailable=!1;i.clearWatch();var e=(h||(h=c("WebStorage"))).getLocalStorage();e&&e.setItem(a.GEOLOCATION_KEY,"0");d("MDOM").show(i.container);d("MDOM").hide(i.question);d("MDOM").hide(i.loading);d("MDOM").show(i.errored);c("Stratcom").invoke("m:jewel-set:notifications-jewel:refresh-flyout");c("Stratcom").invoke(a.STRATCOM_FAIL,null,{error:b});d("MTaggingCounter").logEvent("geo_panel_fail")};this.$4=function(){if(!i.listeners)return;for(var a=0;a<i.listeners.length;a++)i.listeners[a].remove();i.listeners=[]};this.lastUpdateTime=0;this.container=b;this.question=e;this.loading=f;this.errored=g;b=(h||(h=c("WebStorage"))).getLocalStorage();if(b&&b.getItem(a.GEOLOCATION_KEY)==="1")this.$1();else{a.locationAvailable=!1;(e=d("MDOM")).show(this.question);e.hide(this.loading);e.hide(this.errored);e.show(this.container);c("Stratcom").invoke("m:jewel-set:notifications-jewel:refresh-flyout");d("MTaggingCounter").logEvent("geo_panel_load")}this.listeners=[c("Stratcom").listen("click","accept-location",this.$2.bind(this)),c("Stratcom").listen("click","deny-location",this.$3.bind(this)),c("Stratcom").listen("m:page:unload",null,this.$4.bind(this))]}var b=a.prototype;b.clearWatch=function(){if(!this.watchID)return;navigator.geolocation.clearWatch(this.watchID);this.watchID=null};b.$1=function(b){var e=this;a.locationAvailable=!0;var f=(h||(h=c("WebStorage"))).getLocalStorage();f&&f.setItem(a.GEOLOCATION_KEY,"1");d("MDOM").show(this.container);d("MDOM").hide(this.question);d("MDOM").show(this.loading);d("MDOM").hide(this.errored);c("Stratcom").invoke("m:jewel-set:notifications-jewel:refresh-flyout");var g=setTimeout(this.$5,j.timeout);this.watchID=navigator.geolocation.watchPosition(function(a){b&&d("MTaggingCounter").logEvent("geo_panel_success"),clearTimeout(g),e.$6(a)},function(a){b&&d("MTaggingCounter").logEvent("geo_panel_fail"),clearTimeout(g),e.$5(a)},j);c("Stratcom").invoke(a.STRATCOM_ACCEPT)};b.$6=function(b){a.locationAvailable=!0;if(b){var e={},f;for(var g=0;g<i.length;g++)f=i[g],b.coords[f]&&(e[f]=b.coords[f]);b.timestamp&&(e.timestamp=b.timestamp/1e3);this.$7(JSON.stringify(e));d("MDOM").hide(this.container);a.coords=e;c("Stratcom").invoke("m:jewel-set:notifications-jewel:refresh-flyout");c("Stratcom").invoke(a.STRATCOM_UPDATE,null,{position:b})}};b.$7=function(a){var b=Date.now();if(b-this.lastUpdateTime>k){this.lastUpdateTime=b;b=c("XPlacesUpdateLocationController").getURIBuilder().setString("json_location",a).setEnum("source","msite_location_prompt").getURI();new(c("MRequest"))(b).setMethod("POST").send()}};return a}();Object.assign(a,{STRATCOM_ACCEPT:"MLocationPrompt/accept",STRATCOM_DENY:"MLocationPrompt/deny",STRATCOM_UPDATE:"MLocationPrompt/update",STRATCOM_FAIL:"MLocationPrompt/fail",GEOLOCATION_KEY:"authorizeGeolocation",locationAvailable:void 0});g["default"]=a}),98);
__d("MOrientationResize",["MDOM","MLegacyDataStore","MParent","MVector","Stratcom","Vector","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h;function a(a){var b="orientation-resizable",e="content-pane";if(h){f(a.id);return}h=!0;function f(a){a=document.getElementById(a);a&&p([{root:d("MParent").bySigil(a,e),elements:[a]}])}function g(a,b){var d=b.padding||0,e=b.aspectRatio||1,f=b.widthRatio||1;b=b.containerAspectRatio;a=a*f-d;if(!b)f=a,d=Math.floor(a/e);else{a=a;b=a/b;var g=a/b;e=e;e=e/g;e>1?(f=a,d=1/e*b):(f=e*a,d=b)}return new(c("Vector"))(f,d)}function i(a,b){var d=b.aspectRatio||1,e=b.columnCount||1,f=b.gridPadding||0;b=b.photoMargin||0;a=a-f-(e-1)*b;f=Math.floor(a/e);b=Math.ceil(f/d);return new(c("Vector"))(f,b)}function j(a,b){var d=b.aspectRatio||1,e=b.widthRatio||1;b=b.padding||0;a=a*e;e=a/d;return new(c("Vector"))(Math.round(a)-b,Math.floor(e)-b)}function k(a){a=a.getData();var c=d("MDOM").scry(a,"*",b);c&&p([{root:d("MParent").bySigil(a,e),elements:c}])}var l,m;function n(){m++;var a=!1,f=d("MDOM").scry(document,"*",e);if(f&&f.length){var g=[];for(var h=0;h<f.length;h++){var i=f[h],j=i.offsetWidth,k=d("MLegacyDataStore").get(i);k=k&&k.offsetWidth;j!==k&&(d("MLegacyDataStore").set(i,{offsetWidth:j}),a=!0,g.push({root:i,elements:d("MDOM").scry(i,"*",b)}))}g.length&&p(g)}m<3&&(l=c("setTimeoutAcrossTransitions")(n,500));a&&c("Stratcom").invoke("m:orientation-resize:complete")}function o(){m=0,clearTimeout(l),n()}function p(a){var b=[];for(var c=0;c<a.length;c++){var e=a[c].root,f=a[c].elements;if(!e||!f)continue;e=e.offsetWidth;if(e===0)continue;for(var h=0;h<f.length;h++){var k=f[h],l=d("MLegacyDataStore").get(k),m=null,n;switch(l.mode){case"scale-photo-attachment":m=g(e,l);break;case"scale-photo-relative-item":m=j(e-l.outerPadding,l);break;case"scale-photo-grid-item":m=i(e,l);break;case"resize-to-unit":m=q(e,k,l);break;case"resize-feed-2-photos-attachment":n=t(e,k,l);b=b.concat(n);continue;case"resize-feed-3-photos-attachment":n=u(e,k,l);b=b.concat(n);continue;default:continue}b.push({node:k,width:m.x,height:m.y})}}b.forEach(function(a){if(!a||!a.node)return;a.node.style.width=a.width+"px";a.node.style.height=a.height+"px"})}function q(a,b,e){var f=e.padding||0,g=e.aspectRatio||1;e=e.widthRatio||1;b=r(b);b=b?d("MVector").getDim(b).x:a;a=b*e-f;b=Math.floor(a/g);return new(c("Vector"))(a,b)}function r(a){return d("MParent").bySigil(a,"orientation-resize-parent")}function s(a,b){b=b==="P"?4/3:3/4;return Math.floor(a*b)}function t(a,b,c){var e=c.orient;a=a-c.spacing;var f,g,h;if(e==="PL"||e==="LP"){c=Math.round(a*c.fraction);var i=a-c;h=s(c,"L");e==="PL"?(f=i,g=c):(f=c,g=i)}else f=Math.round(a/2),g=a-f,h=s(f,e[0]);c=d("MDOM").scry(b,"*","photoleft")[0];i=d("MDOM").scry(b,"*","photoright")[0];a=[];c&&a.push({node:c,width:f,height:h});i&&a.push({node:i,width:g,height:h});return a}function u(a,b,c){a=a-c.spacing;var e=Math.round(a*c.fraction);a=a-e;var f=s(e,c.orient),g=Math.floor(f/2)-c.margin;c=f-g-c.margin;return[{node:d("MDOM").find(b,"*","mainphoto"),width:e,height:f},{node:d("MDOM").find(b,"*","topphoto"),width:a,height:g},{node:d("MDOM").find(b,"*","bottomphoto"),width:a,height:c}]}a.id&&f(a.id);c("Stratcom").listen(["m:viewport:orientation-change","m:page:render:complete","m:page:render:cache:complete","m:ajax:complete","m:plugin:resize"],null,o);c("Stratcom").listen(["m:timeline:unit:resize","m-timeline-two-column-layout:pre-section-balance"],null,k)}g.main=a}),98);
__d("MPopupSmallCta",["LoggedOutLoginSignupBarTypedLogger","MAnimator","MEvent","MViewport","Run","Style","clearTimeout","ge","setInterval"],(function(a,b,c,d,e,f){"use strict";var g=150,h=1e3,i=214;a={show:function(a,c,d,e){this._expandingCta=a,this._ctaUnit=c,this._closeIcon=d,this._ctaVisible=!1,this._ctaShownOnce=!1,this._ctaClosed=!1,this._referrerSurface=e,b("Run").onAfterLoad(this._init.bind(this))},_init:function(){var a=this,c,d=(c=b("ge"))("header"),e=c("header-notices"),f=c("mobile_login_bar");c=c("account_switcher_footer");this._scrollThreshold=0;this._height=i;if(d){b("Style").set(d,"z-index","0");d=d.clientHeight;d&&(this._scrollThreshold+=d)}if(e){b("Style").set(e,"z-index","0");d=e.clientHeight;d&&(this._scrollThreshold+=d)}if(f){e=f.clientHeight;e&&(this._scrollThreshold+=e,this._height=e)}if(c){d=c.clientHeight;d&&(this._scrollThreshold+=d,this._height=d)}b("setInterval")(this._updateCTA.bind(this),h);b("MEvent").listen(this._closeIcon,"click",function(){a._ctaClosed=!0,a._hideCTA()})},_hideCTA:function(){var a=this,c=this._expandingCta.clientHeight;b("MAnimator").play(c,0,g,function(c){return b("Style").set(a._expandingCta,"height",Math.round(c)+"px")});this._ctaVisible=!1;b("clearTimeout")(this._timerId)},_showCTA:function(){var a=this;if(this._ctaVisible)return;new(b("LoggedOutLoginSignupBarTypedLogger"))().setEvent("login_signup_bar_load").setSurface(this._referrerSurface).log();b("Style").set(this._ctaUnit,"margin-top","0px");b("Style").set(this._expandingCta,"background","none");b("MAnimator").play(0,this._height,g,function(c){return b("Style").set(a._expandingCta,"height",Math.round(c)+"px")});this._ctaVisible=!0;this._ctaShownOnce=!0;b("clearTimeout")(this._timerId)},_updateCTA:function(){var a=b("MViewport").getHeight();if(a<this._height)if(this._ctaVisible)this._hideCTA();else return;a=this._scrollThreshold;!this._ctaVisible&&!this._ctaClosed&&b("MViewport").getScrollTop()>a&&this._showCTA();this._ctaVisible&&b("MViewport").getScrollTop()<a&&this._hideCTA()}};e.exports=a}),null);
__d("MTimelineCTRLogger",["BanzaiLogger","MLegacyDataStore","Stratcom"],(function(a,b,c,d,e,f,g){var h="timeline-ctr-logger";c("Stratcom").listen("click",h,function(a){a=d("MLegacyDataStore").get(a.getNode(h));c("BanzaiLogger").log(a.config,a.data)});a={};g["default"]=a}),98);