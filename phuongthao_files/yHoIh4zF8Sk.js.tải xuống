;/*FB_PKG_DELIM*/

__d("FeedbackReactionIDToTypeNumber",[],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze({1635855486666999:1,1678524932434102:2,478547315650144:3,115940658764963:4,1667835766830853:5,1501783253447867:6,908563459236466:7,444813342392137:8,1536130110011063:10,1663186627268800:11,899779720071651:12,869508936487422:13,938644726258608:14,1609920819308489:15,613557422527858:16,1038933380267464:18,156697673289272:19});function a(a){if(a in g)return g[a];else return 17}f["default"]=a}),66);
__d("MBackButton",["Stratcom"],(function(a,b,c,d,e,f){var g=!1;a=function(){if(g)return;g=!0;b("Stratcom").listen("click","back-button",function(a){history.length>1&&(a.prevent(),history.go(-1))})};f.main=a}),null);
__d("MPopoverVisiblityTracker",["MHistory"],(function(a,b,c,d,e,f,g){"use strict";function a(){}b=function(){return c("MHistory").hasSoftState()};g.init=a;g.isPopoverOpen=b}),98);
__d("MVisibilityTrackingHelper",["MPopoverVisiblityTracker","MViewport","Stratcom","StratcomManager","gkx"],(function(a,b,c,d,e,f,g){function a(a,b){d("StratcomManager").enableDispatch(document,"scroll");return[c("Stratcom").listen("m:root:render",null,a),c("Stratcom").listen("scroll",null,a),c("Stratcom").listen("MScrollArea:scrollend",null,a)]}function b(){return{width:d("MViewport").getWidth(),height:d("MViewport").getHeight()}}function e(){var a=c("gkx")("20872");if(a&&d("MPopoverVisiblityTracker").isPopoverOpen())return!0;a=document.getElementById("MPopupControl");return!!a}g.getEventListeners=a;g.getViewportInfo=b;g.isSnippetFlyoutVisible=e}),98);
__d("MViewportTracking",["invariant","DataAttributeUtils","MDOM","MFBJSON","MHome","MPopoverVisiblityTracker","MVector","MViewport","MVisibilityTrackingHelper","NavigationMetrics","Stratcom","Style","Visibility","gkx","onAfterTTI","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";var i=97,j=200,k=new Map();a=function(){function a(){var a=this;this.$2=[];this.debugConsole=!1;this.activeStories={};this.cachedViewportHeight=0;this.discardVPVDIntervalThreshold=9e4;this.vpvdMinDuration=250;this.isLoose=!1;this.isTimeTrackingEnabled=!1;this.latestTimeTrackingTimestamp=0;this.maxScrollPosition=0;this.minSizeToBeVisible=0;this.readStoryIDs={};this.relaxedMinSize=!1;this.trackingHooks=!1;this.vpvdDebug=!1;this.vpvDebug=!1;this.enableAdsAllocationIntegrityLogging=!1;this.queueLogAction=function(){a.isLoose?a.$3||(a.$3=c("setTimeoutAcrossTransitions")(function(){a.maxScrollPosition=Math.max(a.maxScrollPosition,d("MViewport").getScrollTop()),a.startVpvTracking(),a.$3=null},100)):(window.clearTimeout(a.$1),a.$1=c("setTimeoutAcrossTransitions")(function(){a.startVpvTracking()},a.getTimeout()))}}var b=a.prototype;b.getDataFromConfig=function(a){h(0,2199)};b.getStoryID=function(a){h(0,2200)};b.getDataToLog=function(a){h(0,2201)};b.sendDataToLog=function(a){h(0,2202)};b.getTimeout=function(){h(0,2203)};b.getAllStories=function(){h(0,2204)};b.init=function(b){var e=this;this.isLoose=!!b.is_loose;this.relaxedMinSize=!!b.relaxed_min_size;this.vpvDebug=!!b.vpv_debug;this.isTimeTrackingEnabled=!1;this.vpvdMinDuration=b.vpvd_min_duration||250;var f=a.shouldRunTrackingAfterTTI();d("MPopoverVisiblityTracker").init();f||(this.cachedViewportHeight=d("MViewport").getHeight());this.getDataFromConfig(b);this.maxScrollPosition=0;this.readStoryIDs=this.getCachedReadStoryIDs()||{};this.$2=[c("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)),c("Stratcom").listen("m:viewport:update-complete",null,function(){e.cachedViewportHeight=d("MViewport").getHeight()})];b.triggerOverride?this.$2=this.$2.concat(b.triggerOverride.map(function(a){var b=a[0];a=a[1];return c("Stratcom").listen(b,a,e.queueLogAction.bind(e))})):this.$2.push(c("Stratcom").listen("scroll",null,this.queueLogAction.bind(this)));if(this.isTimeTrackingEnabled){this.$2.push((b=c("Visibility")).addListener(b.VISIBLE,function(){return e.startVpvTracking()}));this.$2.push(b.addListener(b.HIDDEN,function(){return e.stopVpvTracking()}))}this.$2.push(c("Stratcom").listen("m:newsfeed:popup-visible",null,function(){e.stopVpvTracking()}),c("Stratcom").listen("m:newsfeed:popup-hidden",null,function(){e.startVpvTracking()}));f?c("onAfterTTI")(function(){e.startVpvTracking()},!1):(this.startVpvTracking(),c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){a=b.event;a==="tti"&&(e.startVpvTracking(),c("NavigationMetrics").removeCurrentListener())}))};b.getFBFeedLocation=function(){return-1};b.unitTestOnlyGetListeners=function(){return[].concat(this.$2)};b.getCachedReadStoryIDs=function(){return null};b.getMinSizeToBeVisible=function(a){if(!this.relaxedMinSize)return j;a="getBoundingClientRect"in a?a.getBoundingClientRect().height:d("MVector").getDim(a).y;return Math.min(j,a*.5)};b.startVpvTracking=function(){this.isTimeTrackingEnabled?this.startRecordingTimeTrackingData():this.fireEvent()};b.stopVpvTracking=function(){this.isTimeTrackingEnabled?this.stopRecordingTimeTrackingData():this.fireEvent()};b.fireEvent=function(){if(d("MVisibilityTrackingHelper").isSnippetFlyoutVisible())return;var a=this.getAllStoriesInView();for(var b=0;b<a.length;b++){var e=a[b],f=this.getStoryID(e);if(!f||f in this.readStoryIDs)continue;this.readStoryIDs[f]=!0;this.sendDataToLog(this.getDataToLog(e));if(this.vpvDebug){f=d("MDOM").scry(e,"div")[0];f&&c("Style").set(f,"background-color","#fffbe2")}this.markStoryRead(e);this.fireStoryVisibleHandlers(e)}};b.fireStoryVisibleHandlers=function(a){(k.get(a)||[]).forEach(function(a){return a()}),k["delete"](a)};b.markStoryRead=function(a){};b.getTimetrackingDataToLog=function(b){var e=d("MDOM").scry(b.story,"*","data-is-cta").map(function(a){a=c("DataAttributeUtils").getDataFt(a);a=a&&JSON.parse(a);return a&&a.cta_types}).filter(function(a){return!!a});this.cachedViewportHeight===0&&a.shouldRunTrackingAfterTTI()&&(this.cachedViewportHeight=d("MViewport").getHeight());return{evt:i,fbfeed_location:this.getFBFeedLocation(),story_height:b.story_height,viewport_height:this.cachedViewportHeight,vpvd_start_timestamp:b.evp_ts/1e3,vpvd_time_delta:Math.round(b.vpvd||0),cta_types:e}};b.recordTimeStoryWasInView=function(a){if(this.isTimeTrackingEnabled&&a.vpvd>=this.vpvdMinDuration){var b=this.getTimetrackingDataToLog(a);if(typeof b!=="string"){a=c("DataAttributeUtils").getDataFt(a.story);a&&(b=babelHelpers["extends"]({},b,d("MFBJSON").parse(a,f.id)))}this.sendTimetrackingDataToLog(b)}};b.startRecordingTimeTrackingData=function(){this.$4(!1)};b.stopRecordingTimeTrackingData=function(){this.$4(!0)};b.$4=function(a){this.activeStories||(this.activeStories={});var b=Date.now();this.latestTimeTrackingTimestamp||(this.latestTimeTrackingTimestamp=b);var c=this.getAllStoriesInViewVpvd();this.updateVPVDurations(b);if(this.debugConsole){var d=Object.values(this.activeStories);d.length&&(console.table&&console.table(d))}d=this.updateActiveStories(c,b);this.debugConsole&&(d.length&&(console.table&&console.table(d)));this.recordVPVDurations(c,a);this.latestTimeTrackingTimestamp=a?0:b};b.updateVPVDurations=function(a){var b=a-this.latestTimeTrackingTimestamp;if(b>this.discardVPVDIntervalThreshold)return;b=a-this.latestTimeTrackingTimestamp;for(a in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,a)&&(this.activeStories[a].vpvd+=b)};b.isVisible=function(a,b){for(var c=0;c<b.length;c++)if(this.getStoryID(b[c])===a)return!0;return!1};b.recordVPVDurations=function(a,b){this.recordVPVDurationsInternal(a,b)};b.recordVPVDurationsInternal=function(a,b){for(var c in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,c)&&((b||!this.isVisible(c,a))&&(this.recordTimeStoryWasInView(this.activeStories[c]),delete this.activeStories[c]))};b.updateActiveStories=function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=this.getStoryID(a[d]);if(!e)break;e in this.activeStories||(this.activeStories[e]={evp_ts:b,story:a[d],vpvd:0,story_height:a[d].offsetHeight},c.push(this.activeStories[e]));this.activeStories[e].ts=b}return c};b.getAllStoriesInView=function(a){a===void 0&&(a=!1);return this.getAllStoriesInViewInternal(a,this.isLoose)};b.getAllStoriesInViewVpvd=function(){return this.getAllStoriesInViewInternal(!1,!1)};b.getAllStoriesInViewInternal=function(a,b){a===void 0&&(a=!1);b===void 0&&(b=!0);var c=[],e=this.getAllStories(),f=d("MViewport").getScrollTop(),g=d("MViewport").getHeight(),h=g+this.maxScrollPosition-f;for(var i=0;i<e.length;i++){var j=e[i],k=this.getStoryBounds(f,j),l=k.top;k=k.bottom;if(!l&&!k)continue;var m=this.getMinSizeToBeVisible(j);if(!b&&l>g-m)break;m=!b&&l<=g-m&&k>=m||b&&l<h;a&&(k<0||l>g)&&(m=!1);m&&c.push(j)}return c};b.getStoryBounds=function(a,b){if("getBoundingClientRect"in b){var c=b.getBoundingClientRect();return{bottom:c.bottom,top:c.top}}else{c=d("MVector").getPos(b).y-a;return{top:c,bottom:c+d("MVector").getDim(b).y}}};b.cleanup=function(){this.$2.forEach(function(a){return a.remove()}),this.$2=[],k.clear()};b.onUnload=function(){this.stopVpvTracking(),this.cleanup()};b.sendTimetrackingDataToLog=function(a){this.sendDataToLog(a)};a.shouldRunTrackingAfterTTI=function(){return d("MHome").isHome(location.href)&&c("gkx")("20871")};a.addStoryVisibleHandler=function(a,b){k.set(a,[].concat(k.get(a)||[],[b]));return{remove:function(){k.set(a,(k.get(a)||[]).filter(function(a){return a!==b}))}}};return a}();g["default"]=a}),98);
__d("MCommentViewportTracking",["MDOM","MDataStore","MFBJSON","MParent","MViewportTracking","Stratcom","StratcomManager","WebCommentVpvDurationFalcoEvent","compactArray","gkx","onAfterTTI"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i={m_group_stories_container:"group",m_newsfeed_stream:"",m_news_feed_stream:"",m_story_permalink_view:"",structured_composer_async_container:"user",root:""};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.loadedReplies=function(){c("Stratcom").invoke("m:commentViewportTracking:loadedReplies")};b.loadedComments=function(){h&&h.isTimeTrackingEnabled&&h.startRecordingTimeTrackingData()};b.singleton=function(a){if(!h){a={triggerOverride:[["scroll",null],["m:commentViewportTracking:loadedReplies",null],["m:feed-ufi-flyout:comments-displayed",null],["m:ufi:live-comments:render",null],["m:ufi:live-comments:new-comment",null],["m:feed-ufi-flyout:reset",null],["m:page:render:complete",null]]};d("StratcomManager").enableDispatch(document,"scroll");h=new b();h.init(a);h.debugConsole;h.isTimeTrackingEnabled&&(c("MViewportTracking").shouldRunTrackingAfterTTI()?c("onAfterTTI")(function(){h instanceof b&&h.startRecordingTimeTrackingData()},!1):h.startRecordingTimeTrackingData());c("Stratcom").listen("m:page:unload",null,function(){h=null,c("Stratcom").removeCurrentListener()})}};b.registerFlyout=function(a,b){var c;h&&(h.debugConsole,h.streamRoot=a);i=babelHelpers["extends"]((c={},c[a.id]=b||"",c),i)};var e=b.prototype;e.getDataFromConfig=function(){this.debugConsole=c("gkx")("20869"),this.isTimeTrackingEnabled=!0,this.idle_timeout=5e3,this.min_duration_to_log=100,this.min_visible_size=200,this.relaxedMinSize=!0};e.__getRootNode=function(){this.streamRoot||(this.streamRoot=c("compactArray")(Object.keys(i).map(function(a){return document.getElementById(a)}))[0]||null);return this.streamRoot};e.__getStaticTemplateRootNode=function(){this.staticElementRoot||(this.staticElementRoot=document.getElementById("static_templates"));return this.staticElementRoot};e.getAllStories=function(){var a=this.__getRootNode();if(!a)return[];a=d("MDOM").scry(this.__getRootNode(),"div","comment-body");return this.__getStaticTemplateRootNode()?a.concat(d("MDOM").scry(this.__getStaticTemplateRootNode(),"div","comment-body")):a};e.getTimeout=function(){return this.min_duration_to_log};e.getDataToLog=function(a){return{}};e.getStoryID=function(a){var b=a.getAttribute("data-commentid");return!b?String(d("MDataStore").get(a,"token"))||null:b};e.getContainerModule=function(){var a=this.__getRootNode();return!a||!(a.id in i)?"other":i[a.id]};e.getTimetrackingDataToLog=function(a){var b=a.story,c;try{var e=d("MParent").bySigil(a.story,"story-div")||d("MParent").bySigil(a.story,"m-feed-single-story");e&&(c=d("MFBJSON").parse(e.getAttribute("data-ft"),f.id))}catch(a){}return{comment_id:this.getStoryID(b),duration_ms:Math.round(a.vpvd),container_module:this.getContainerModule(),mf_story_key:c?c.mf_story_key||c.top_level_post_id:null}};e.sendDataToLog=function(a){a.comment_id&&(this.debugConsole,c("WebCommentVpvDurationFalcoEvent").log(function(){return{json_data:JSON.stringify(a)}}))};return b}(c("MViewportTracking"));g["default"]=a}),98);
__d("MDeepCopy",[],(function(a,b,c,d,e,f){function g(a){if(Array.isArray(a))return i(a);else if(typeof a==="object"&&a!==null)return h(a);else return a}function h(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=g(a[c]));return b}function i(a){a=a.slice();for(var b=0;b<a.length;++b)a[b]=g(a[b]);return a}f["default"]=g}),66);
__d("MFeedErrorDetection",["Banzai","DataAttributeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h={};function i(a,b,d,e){a={event:a,shouldLogDetail:b,site:"mtouch"};b&&(a.intValues=d,a.normalValues=e);c("Banzai").post("feed_error_detection",a,{delay:0})}function a(a){var b=a.feedObjectElement;a=a.shouldLogDetail;if(!b)return;var d=c("DataAttributeUtils").getDataFt(b);b=b.getAttribute("data-dedupekey");if(!b||!d)return;if(h[b]){var e;a&&(e={dedupKey:b,ft_A:d,ft_B:h[b]});i("mtouch_duplicate_stories",a,{},{dup_field:e||{}})}else h[b]=d}g.registerFeedStory=a}),98);
__d("MLiveData",["MDeepCopy","Stratcom","eventsMixinDeprecated"],(function(a,b,c,d,e,f){var g={},h={},i,j={},k,l,m=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.getData=function(){return b("MDeepCopy")(g[this.$1]||{})};return a}();b("eventsMixinDeprecated")(m,["change"]);var n={_set:function(a,b,c){var d=g[a],e=d&&d.timestamp&&b.timestamp&&d.timestamp>b.timestamp;if(l||e)return;!d||c?g[a]=b:Object.assign(g[a]||{},b);h[a]||(h[a]=new m(a));h[a].invoke("change")},update:function(a,b){n._set(a,b,!1)},set:function(a,b){n._set(a,b,!0)},get:function(a){i||(i=b("Stratcom").listen("m:page:render:cache:start",null,function(){l=!0,b("Stratcom").listen("m:page:iui:response:complete",null,function(){l=!1,b("Stratcom").removeCurrentListener(),Object.keys(j).forEach(function(a){var b=g[a];b&&Object.keys(b).length&&h[a].invoke("change")})})}));j[a]||(j[a]=!0);k||(k=b("Stratcom").listen("m:page:unload",null,function(){j={}}));h[a]||(h[a]=new m(a));return h[a]}};e.exports=n}),null);
__d("MPageTitle",[],(function(a,b,c,d,e,f){function a(a){document.title=a}f.setTitle=a}),66);
__d("UFIReactionsUtils",[],(function(a,b,c,d,e,f){function a(a,b,c,d,e){e===void 0&&(e=null);b=parseInt(b,10);var f=!!b,g=a.reactorids?a.reactorids.slice(0):[],h=g.indexOf(c),i=0;f?h<0&&(c&&g.unshift(c),i=1):h>-1&&(g.splice(h,1),i=-1);h=Math.max(a.reactioncount+i,0);i=a.reactioncountreduced;i&&!isNaN(i)&&(d?i=d(h):i=h.toString());d=a.reactioncountmap||{};var j=a.reactioncountmapbyid||{},k,l=a.viewerreaction,m=a.viewerreactionid;l&&d[l]&&(d[l]["default"]=Math.max((d[l]["default"]||0)-1,0),k=d[l].reduced,k&&!isNaN(k)&&(d[l].reduced=d[l]["default"].toString()));m&&j[m]&&(j[m]["default"]=Math.max((j[m]["default"]||0)-1,0),k=j[m].reduced,k&&!isNaN(k)&&(j[m].reduced=j[m]["default"].toString()));f&&d[b]&&(d[b]["default"]=(d[b]["default"]||0)+1,k=d[b].reduced,k&&!isNaN(k)&&(d[b].reduced=d[b]["default"].toString()));f&&e!==null&&(j[e]||(j[e]={}),j[e]["default"]=(j[e]["default"]||0)+1,k=j[e].reduced,k&&!isNaN(k)&&(j[e].reduced=j[e]["default"].toString()));m=a.userreactions;(!m||Array.isArray(m))&&(m={});c&&(f?m[c]=b:delete m[c]);k=null;if(a.reactionsentences){f=!(l&&b);k={current:a.reactionsentences[f?"alternate":"current"],alternate:a.reactionsentences[f?"current":"alternate"]}}return{reactioncount:h,reactioncountmap:d,reactioncountmapbyid:j,reactioncountreduced:i,reactionsentences:k,reactorids:g,userreactions:m,viewerreaction:b,viewerreactionid:e}}function b(a){var b={};if(!a)return b;for(var c=0;c<a.length;c++){var d=a[c],e=d.feedback_reaction.key;b[e]={"default":d.reactors&&d.reactors.count,reduced:d.reactors&&d.reactors.display_count}}return b}f.getReactionData=a;f.getReactionCountMapFromSummary=b}),66);
__d("MUFIReactionsUtils",["BackgroundSyncParameters","DateConsts","UFIReactionsUtils"],(function(a,b,c,d,e,f){var g=[null,null],h=1,i=0,j={getReactionData:function(a,c,d){d===void 0&&(d=null);var e=a.viewerreaction||a.has_viewer_liked?h:i,f=a.like_count,j=a.like_counts||g,k=a.like_friend_sentences||g,l=a.like_sentences||g;e&&!c?f--:!e&&c&&f++;var m=a.reduced_like_count;isNaN(m)||(m=f.toString());(e&&!c||!e&&c)&&(j=[j[1],j[0]],k=[k[1],k[0]],l=[l[1],l[0]]);return babelHelpers["extends"]({has_viewer_liked:!!c,like_count:f,like_counts:j,like_friend_sentences:k,like_sentences:l,reduced_like_count:m},b("UFIReactionsUtils").getReactionData(a,c,a.actor_for_post,null,d))},getReactionDataForComment:function(a,b,c){c===void 0&&(c=null);var d=a.reactioncount,e=a.reactioncountreduced;a.viewerreaction&&!b?d--:!a.viewerreaction&&b&&d++;d=Math.max(d,0);e&&!isNaN(e)&&(e=d.toString());a=j.getReactionData(a,b,c);return{has_viewer_liked:a.has_viewer_liked,like_count:a.like_count,reactioncount:d,reactioncountmap:a.reactioncountmap,reactioncountmapbyid:a.reactioncountmapbyid,reactioncountreduced:e,viewerreaction:a.viewerreaction,viewerreactionid:a.viewerreactionid}},getConfigForBackgroundRetry:function(a){return!navigator.serviceWorker||!navigator.serviceWorker.controller?void 0:b("BackgroundSyncParameters").shouldRecoverReactions?{requestId:"react_"+a,ttl:2*b("DateConsts").SEC_PER_HOUR,maxRetry:1}:void 0},maybeConvertTokenToFBID:function(a){return a.toString().indexOf("_")>0?a.toString().split("_")[1]:a}};e.exports=j}),null);
__d("MUFIRequest",["ChannelClientID","ClientIDs","MLiveData","MRequest","MURI","Stratcom"],(function(a,b,c,d,e,f){var g=b("MURI").getHashPrefixRegex(),h={};function a(a){a=new(b("MURI"))(a);var c=a.getFragment();g.test(c)&&(a=new(b("MURI"))(c.replace(g,"/")));return a.setProtocol(null).setDomain(null).setFragment(null)}function c(a,c,d,e,f){c&&(c.request_id=null,b("MLiveData").update(a,c));h[a]&&h[a].abort();d.addQueryData("client_id",b("ClientIDs").getNewClientID());d.addQueryData("session_id",b("ChannelClientID").getID());c=new(b("MRequest"))(d.toString());c.listen("finally",function(){h[a]=null});c.listen("postprocess",function(){b("Stratcom").invoke("m:ajax:complete")});c.setAutoRetry(!0);f&&c.setBackgroundRetry(f);e&&c.setData(e);h[a]=c;c.send()}e.exports={getURI:a,send:c}}),null);
__d("TouchEventType",[],(function(a,b,c,d,e,f){a="touchend";b="touchstart";c={END:a,START:b};f["default"]=c}),66);
__d("createIxElement",["invariant","coerceImageishSprited","coerceImageishURL","cr:6114","joinClasses"],(function(a,b,c,d,e,f,g,h){function a(a,d){var e="img",f=c("coerceImageishSprited")(a);a=c("coerceImageishURL")(a);if(f){f=b("cr:6114").create("i",{className:c("joinClasses")(e,f.type==="css"?f.className:void 0),style:f.type==="cssless"?f.style:void 0});d!=null&&b("cr:6114").setContent(f,b("cr:6114").create("u",null,d));return f}a||h(0,2521);f=b("cr:6114").create("img",{className:e,src:a.uri});d!=null&&f.setAttribute("alt",d);f.setAttribute("width",String(a.width));f.setAttribute("height",String(a.height));return f}g["default"]=a}),98);