;/*FB_PKG_DELIM*/

__d("MUFICommentLikeLink",["MDOM","MLiveData","MUFIReactionsUtils","MUFIRequest","Stratcom","Style","SubscriptionsHandler","UFIReactionTypes"],(function(a,b,c,d,e,f,g){var h="1635855486666999";a=function(a){var b=this;this.onChange=function(){if(b.feedbackTarget.getData().request_id===b.requestID)return;var a=b.feedbackTarget.getData();a=a.viewerreaction;a&&!c("UFIReactionTypes").reactions[a]&&(a=null);var e,f;!a?(e="",f=c("UFIReactionTypes").reactions[c("UFIReactionTypes").LIKE].display_name):(e=c("UFIReactionTypes").reactions[a].color,f=c("UFIReactionTypes").reactions[a].display_name);d("MDOM").setContent(b.likeLink,f);c("Style").set(b.likeLink,"color",e)};this.onClick=function(a){a.prevent();var e=b.feedbackTarget.getData(),f=e.has_viewer_liked,g=d("MUFIReactionsUtils").maybeConvertTokenToFBID(e.comment_id||e.ft_ent_identifier),i=f?c("UFIReactionTypes").NONE:c("UFIReactionTypes").LIKE,j=f?null:h,k=a.getNode("tag:a");k||(k=a.getNode("tag:div"));if(!k)return;c("Stratcom").hasSigil(b.likeLink,"kaios-like-react-trigger")&&f&&a.stop();f=d("MUFIRequest").getURI(k.getAttribute("href")||k.getAttribute("data-uri"));f.addQueryData("reaction_comment_id",g);f.addQueryData("viewer_reaction",i);d("MUFIRequest").send(b.feedbackTargetID,d("MUFIReactionsUtils").getReactionDataForComment(e,i,j),f)};this.onUnload=function(){b.subscriptions&&b.subscriptions.release()};this.likeLink=a.likeLink;this.requestID=a.requestID;this.feedbackTargetID=a.feedbackTargetID;this.feedbackTarget=d("MLiveData").get(a.feedbackTargetID);this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(d("MDOM").listen(this.likeLink,"click",null,this.onClick.bind(this)),this.feedbackTarget.listen("change",this.onChange.bind(this)),c("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)));this.likeLink.href&&(this.likeLink.setAttribute("data-uri",this.likeLink.href),this.likeLink.removeAttribute("href"))};g["default"]=a}),98);
__d("MUFICommentReactionBadge",["cx","FeedbackReactionIDToTypeNumber","MCSS","MDOM","MLiveData","Stratcom","SubscriptionsHandler","UFIReactionIcons","UFIReactionTypes","createIxElement"],(function(a,b,c,d,e,f,g,h){var i=3,j=16;c("UFIReactionTypes").ordering.unshift(17);var k=c("UFIReactionTypes").ordering.reduce(function(a,b,c){a[b]=c;return a},{});a=function(a){var b=this;this.onChange=function(){if(b.feedbackTarget.getData().request_id===b.requestID)return;var a=b.feedbackTarget.getData(),e=a.reactioncountmapbyid,f=a.ufireactioniconsbyid,g=Object.keys(e).filter(function(a){a=e[a];return a&&a["default"]>0}).sort(function(a,b){var d=e[a]["default"],f=e[b]["default"];return d===f?k[c("FeedbackReactionIDToTypeNumber")(a)]-k[c("FeedbackReactionIDToTypeNumber")(b)]:f-d}).slice(0,i).map(function(a){var b=null;c("FeedbackReactionIDToTypeNumber")(a)===17?b=c("createIxElement")(f[a][j]):b=c("createIxElement")(c("UFIReactionIcons")[c("FeedbackReactionIDToTypeNumber")(a)][j]);a=d("MDOM").create("span",{className:"_4edl"});d("MDOM").appendContent(a,b);return a});c("MCSS").conditionClass(b.reactionBadge,"_4edm",!!a.reactioncount);d("MDOM").setContent(b.reactionBadge.firstChild,g);d("MDOM").setContent(b.reactionBadge.lastChild,a.reactioncountreduced)};this.onUnload=function(){b.subscriptions&&b.subscriptions.release()};this.feedbackTarget=d("MLiveData").get(a.feedbackTargetID);this.reactionBadge=a.reactionBadge;this.requestID=a.requestID;this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(this.feedbackTarget.listen("change",this.onChange.bind(this)),c("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)))};g["default"]=a}),98);
__d("MUFICommentReplyLink",["MAjaxify","MDOM","MParent","MRequest","MUFIConfig","MUFIInlineRepliesFunnelLogConfig","Stratcom","SubscriptionsHandler","ge"],(function(a,b,c,d,e,f,g){"use strict";var h="feed-ufi-comments";function a(a){var b=a.composerID,e=a.placeholderID,f=a.node,g=a.loadComposerURI,h=a.loggingTargetFBID,j=a.replyAuthorName,k=a.replyAuthorID;c("MUFIConfig").canReactToComment&&(f.href&&f.setAttribute("data-uri",f.href),f.removeAttribute("href"));var l=new(c("SubscriptionsHandler"))();l.addSubscriptions(d("MDOM").listen(f,"click",null,function(a){i({composerID:b,placeholderID:e,loadComposerURI:g,loggingTargetFBID:h,replyAuthorName:j,replyAuthorID:k,onPreventDefault:function(){a.prevent()}})}),d("MDOM").listen(f,"mousedown",null,function(a){c("Stratcom").invoke("MCommentComposer:replyButtonClick",null,{composerID:b})}),c("Stratcom").listen("m:page:unload",null,function(){l.release()}),c("Stratcom").listen("m:feed-ufi-flyout:reset",null,function(){l.release()}))}function b(a){var b=new(c("SubscriptionsHandler"))();b.addSubscriptions(c("Stratcom").listen("obj:finally",null,function(c){c=d("MDOM").scry(a,"*","mufi-composer")[0];c&&c.focus&&c.focus();b.release()}))}function i(a){var b=a.composerID,e=a.placeholderID,f=a.loadComposerURI,g=a.loggingTargetFBID;a=a.onPreventDefault;g&&c("MUFIInlineRepliesFunnelLogConfig").MUFIInlineReplyComposerFunnelLogger&&c("MUFIInlineRepliesFunnelLogConfig").MUFIInlineReplyComposerFunnelLogger.logReplyClicked(g);g=c("ge")(b);b=g&&d("MDOM").scry(g,"*","mufi-composer")[0];if(b){a();d("MParent").bySigil(g,h)?c("Stratcom").invoke("MUFICommentReplyLink:show-inline-composer",null,{composerRoot:g}):b.focus();return}g=c("ge")(e);if(g&&f){a();d("MAjaxify").ajaxify(null,g,new(c("MRequest"))(f),null);return}}g.initInlineRepliesWithMention=a;g.bindFocusInlineReplyComposerAfterPageFinish=b;g.focusOrLoadInlineReplyComposerWithMention=i}),98);
__d("MUfiNewCommentScroll",["$","MDOM","MViewport","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=function(a){var c=!0;if(!window.FW_ENABLED){var d=b("MDOM").scry(document,"*","m-composer");c=d&&d.length<=1}if(c&&!!a.commentID){var e=b("$")(a.commentID);b("setTimeoutAcrossTransitions")(function(){b("MViewport").scrollToNode(e)},0)}};f.main=a}),null);