;/*FB_PKG_DELIM*/

__d("DataViewPolyfill",[],(function(a,b,c,d,e,f){"use strict";b=function(){function b(a,b,c){b===void 0?this.$1=new Uint8Array(a):c===void 0?this.$1=new Uint8Array(a,b):this.$1=new Uint8Array(a,b,c),this.byteLength=this.$1.byteLength}var c=b.prototype;c.getUint8=function(a){if(a>=this.$1.length)throw new Error("Trying to read beyond bounds of DataViewPolyfill");return this.$1[a]};c.getUint16=function(a,b){var c=this.getUint8(a);a=this.getUint8(a+1);return b?a*256+c:c*256+a};c.getUint32=function(a,b){var c=this.getUint8(a),d=this.getUint8(a+1),e=this.getUint8(a+2);a=this.getUint8(a+3);return b?((a*256+e)*256+d)*256+c:((c*256+d)*256+e)*256+a};b.isSupported=function(){return!!a.Uint8Array};return b}();e.exports=b}),null);
__d("GridItem.react",["cx","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.alignv,d=a.alignh,e=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["alignv","alignh","className"]);return j.jsx("td",babelHelpers["extends"]({},a,{className:c("joinClasses")(e,"_51m-"+(b==="top"?" vTop":"")+(b==="middle"?" vMid":"")+(b==="bottom"?" vBot":"")+(d==="left"?" hLeft":"")+(d==="center"?" hCent":"")+(d==="right"?" hRght":""))}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("Grid.react",["cx","GridItem.react","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,d=a.alignh,e=a.alignv,f=a.children,g=a.cols,h=a.fixed,i=a.spacing,k=j.Children.count(f),l=[],m=[],n=0;j.Children.forEach(f,function(a,f){if(a===null||a===void 0)return;var o=a.type===j.createElement(b.GridItem).type;n+=o?Math.max(a.props.colSpan||0,1):1;var p=n===g?"_51mw":"";o=o?j.cloneElement(a,{key:a.key||f,alignh:a.props.alignh||d,alignv:a.props.alignv||e,className:c("joinClasses")(a.props.className,i,p)}):j.jsx(c("GridItem.react"),{alignh:d,alignv:e,className:c("joinClasses")(i,p),children:a},a.key||f);m.push(o);if(n%g===0||f+1===k){if(h===!0&&n<g){for(p=n;p<g;p++)m.push(j.jsx(c("GridItem.react"),{},f+p));n=g}l.push(j.jsx("tr",{className:"_51mx",children:m},f));m=[];n=0}});return j.jsx("table",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"uiGrid _51mz"+(h===!0?" _5f0n":"")),cellSpacing:"0",cellPadding:"0",children:j.jsx("tbody",{children:l})}))};return b}(j.Component);a.GridItem=c("GridItem.react");g["default"]=a}),98);
__d("MCommentStatusLogger",["BanzaiLogger","err","uuidv4"],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze({INIT:"init",SUBMIT:"submit",RESPOND:"respond",RENDER:"render"});a=function(a,b,c){this.prevEventType=a||null,this.perfLoggable=!!b,this.isEndStep=!!c};var h={};h[g.INIT]=new a();h[g.SUBMIT]=new a(g.INIT,!0);h[g.RESPOND]=new a(g.SUBMIT,!0);h[g.RENDER]=new a(g.RESPOND,!0,!0);var i=function(){function a(a){this.$1=a,this.$2={},this.$3=0,this.$4=0,this.$5=null}var c=a.prototype;c.$6=function(a){return a in this.$2};c.logEvent=function(a,c){if(this.$6(a)||!(a in h))return!1;var d=h[a],e=d.prevEventType;if(e&&!this.$6(e))return!1;this.$3=c&&Object.prototype.hasOwnProperty.call(c,"text")?c.text:this.$3;this.$4=c&&Object.prototype.hasOwnProperty.call(c,"photo")?c.photo:this.$4;this.$5=(c&&Object.prototype.hasOwnProperty.call(c,"stickerID")?c.stickerID:this.$5)||null;c=Date.now();var f=Math.round(c/1e3);this.$2[a]=c;c={event:a,text_length:this.$3,num_photos:this.$4,sticker_id:this.$5,interaction_key:this.$1,client_time:f};if(e&&d.perfLoggable){f=this.$7(e,a);c=babelHelpers["extends"]({duration:f},c)}b("BanzaiLogger").create({retry:!0}).log("MCommentWriteWaterfallLoggerConfig",c);return!0};c.$7=function(a,b){var c=this.$2;if(!this.$6(a)||!this.$6(b))return null;a=c[a];c=c[b];return a>c?null:c-a};return a}(),j={},k={newInteractionKey:function(){return b("uuidv4")()},_logCommentStatus:function(a,b,c){if(!(b in h))return;var d=j[a];if(b===g.INIT)if(d)return;else d=new i(a),j[a]=d;if(!d)return;d=d.logEvent(b,c);d&&h[b].isEndStep&&k.clear(a)},logInitText:function(a){k._logCommentStatus(a,g.INIT,{text:1})},logInitPhoto:function(a){k._logCommentStatus(a,g.INIT,{photo:1})},logSubmit:function(a,b){k._logCommentStatus(a,g.SUBMIT,{text:b.text,photo:b.photo,stickerID:null})},logReceiveResponse:function(a,b){k._logCommentStatus(a,g.RESPOND,{text:b.text,photo:b.photo,stickerID:b.stickerID})},logRender:function(a){k._logCommentStatus(a,g.RENDER)},logInitAndSubmitSticker:function(a,b){k._logCommentStatus(a,g.INIT,{text:0,photo:0,stickerID:b}),k._logCommentStatus(a,g.SUBMIT,{text:0,photo:0,stickerID:b})},clear:function(a){a in j&&delete j[a]}};e.exports=k}),null);
__d("MComposeSubmitHandler",["$","MDOM","MViewport","Stratcom"],(function(a,b,c,d,e,f){function a(a){b("Stratcom").listen("click","send",function(){var a=b("$")("messaging_compose_error");if(a.children.length===0)return;var c=a.offsetHeight;b("MDOM").setContent(a,"");b("MViewport").scrollBy(0,-c)})}f.main=a}),null);
__d("MProgressBar.react",["cx","MAnimator","joinClasses","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this,b)||this;c.$1=!1;c.$2=null;c.state={value:c.props.initialValue};c.setValue=function(a){c.$1&&c.setState({value:a})};return c}var d=c.prototype;d.componentDidMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$2&&this.$2.dispose(),this.$1=!1};d.$3=function(a){var b=this.props;return Math.min(Math.max((a-b.min)/(b.max-b.min)*100,0),100)};d.$4=function(){var a=this.$3(this.props.value!=null?this.props.value:this.state.value),b=Math.round(a);b="fill"+(b===0?" empty":"")+(b===100?" full":"");return i.jsx("div",{className:b,style:{width:a+"%"}})};d.animate=function(a,c){var d=this.$3(this.state.value);a=this.$3(a);this.$2&&this.$2.dispose();this.$2=b("MAnimator").play(d,a,c,this.setValue)};d.render=function(){return i.jsx("div",{className:b("joinClasses")(this.props.className,"_lbu"),children:this.$4()})};return c}(i.Component);a.defaultProps={min:0,max:100};e.exports=a}),null);
__d("MComposerBackgroundUploadProgress",["cx","fbt","$","MAjaxify","MAjaxifyFormTypes","MDOM","MEvent","MLinkHack","MModalDialog","MProgressBar.react","Promise","ReactDOM_DEPRECATED","Stratcom","promiseDone","react","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||d("react"),m=5,n=8,o=500,p=.7,q=500,r=1e4,s=250,t=90,u=function(){function a(e){var f=this;this.$22=function(a){return new(j||(j=b("Promise")))(function(b,e){f.$2.style.transform="translateY(100%)",c("setTimeoutAcrossTransitions")(function(){d("MDOM").hide(a),b()},o)})};this.$25=function(b,e){e.kill();var g=b.link;e=[];g.setAttribute("disabled","disabled");e.push({response:function(){a.openModalDialogWithPermalink(g,b.snowflakePermalink),f.$22(f.$7)},error:function(){var a=f.$22(f.$7);a=a.then(function(){return f.showErrorMsg()});c("promiseDone")(a)}});d("MAjaxify").form(null,b.form,null,d("MAjaxifyFormTypes").NO_CACHE,null,!1,e)};this.$2=e;this.$3=(e=d("MDOM")).find(this.$2,"div","inprogress");this.$6=e.find(this.$2,"div","error");this.$1=c("$")("viewport");this.$8=!1;this.$10=!1;this.$11=!0;this.$4=e.find(this.$3,"div","spinner-container");this.$5=e.find(this.$3,"div","progress-bar-container");this.$11&&this.$16();this.$17();this.$18();this.$19(this.$6)}var e=a.prototype;e.$16=function(){var a=this;this.$13=d("ReactDOM_DEPRECATED").render_DEPRECATED(l.jsx(c("MProgressBar.react"),{initialValue:0,className:"_6zj1"}),this.$5);this.$12=c("Stratcom").listen("MMultiPhotoUploader:upload:progress",null,function(b){b=b.getData();a.$14=b.totalSize;a.$15=b.totalLoaded;a.$8&&a.$13&&(a.$14===a.$15?a.$13.animate(t,r):a.$13.animate(a.$20(),q))})};e.$21=function(a){var b=this;d("MDOM").show(a);c("setTimeoutAcrossTransitions")(function(){b.$2.style.transform="translateY(0%)"},0)};e.$23=function(a,b){var d=this;c("setTimeoutAcrossTransitions")(function(){c("promiseDone")(d.$22(a))},1e3*b)};e.$24=function(a,b){var e=this;c("setTimeoutAcrossTransitions")(function(){c("promiseDone")(e.$22(a),function(){d("MDOM").remove(a)})},1e3*b)};e.$17=function(){var a=this;window.addEventListener("beforeunload",function(b){if(!a.$8)return void 0;var c=i._("Ch\u00fang t\u00f4i v\u1eabn \u0111ang t\u1ea3i b\u00e0i vi\u1ebft c\u1ee7a b\u1ea1n l\u00ean. N\u1ebfu b\u1ea1n r\u1eddi kh\u1ecfi l\u00fac n\u00e0y, b\u00e0i vi\u1ebft s\u1ebd kh\u00f4ng \u0111\u01b0\u1ee3c \u0111\u0103ng.");b.returnValue=c;return c})};e.$18=function(){var a=this;window.bgUploadInlineComposerCallback=function(){return a.blockNavigateToComposer()}};e.$19=function(a){var b=this,e=d("MDOM").scry(a,"a");e.map(function(d){return c("MEvent").listen(d,"click",function(){b.$22(a)})})};e.$20=function(){return this.$15&&this.$14?this.$15/this.$14*100*p:0};e.$26=function(){this.$13&&this.$13.animate(100,s);return new(j||(j=b("Promise")))(function(a,b){c("setTimeoutAcrossTransitions")(function(){a()},s)})};e.$27=function(){this.$8=!1,this.$15=null,this.$14=null};e.showErrorMsg=function(){var a=this;this.$27();var b=this.$22(this.$3);b=b.then(function(){return a.$21(a.$6)});this.$23(this.$6,n);c("promiseDone")(b)};e.setCompleteMsg=function(a,b){d("MDOM").appendContent(this.$2,a),this.$19(a),this.$7=a,this.$9=b};e.setBackgroundUploadRunning=function(a,b){var e=this;if(!a&&!this.$8)return;if(a){this.$8=!0;this.$13&&b?(this.$13.setValue(this.$20()),d("MDOM").hide(this.$4),d("MDOM").show(this.$5),this.$14&&this.$15&&this.$14===this.$15&&(this.$13&&this.$13.animate(t,r))):(d("MDOM").hide(this.$5),d("MDOM").show(this.$4));this.$21(this.$3);return}this.$27();a=this.$13?this.$26().then(this.$22.bind(this,this.$3)):this.$22(this.$3);a=a.then(function(){return e.$21(e.$7)});this.$24(this.$7,this.$9||m);c("promiseDone")(a)};e.blockNavigateToComposer=function(){if(this.$8){alert(i._("B\u1ea1n c\u00f3 th\u1ec3 \u0111\u0103ng l\u1ea1i ngay khi b\u00e0i vi\u1ebft tr\u01b0\u1edbc \u0111\u00e3 \u0111\u01b0\u1ee3c \u0111\u0103ng."));return!0}return!1};e.isRunning=function(){return this.$8};e.isWaitingForTagSuggestions=function(){return this.$10};e.setupTagFriendsButton=function(a){d("MDOM").listen(a.link,"click",null,this.$25.bind(this,a))};a.openModalDialogWithPermalink=function(a,b){d("MLinkHack").remove(a),d("MModalDialog").openWithPermalinkURI(a.href,b)};return a}(),v=null,w=function(){if(!v){var a=d("MDOM").scry(c("$")("static_templates"),"div","bg-upload-progress-root")[0];if(!a)return null;v=new u(a)}return v},x=function(){return v},y=function(){return!!(v&&v.isRunning())};function a(a){if(!v)return;v.setCompleteMsg(a.completeMsg,a.msgDismissSeconds);v.setBackgroundUploadRunning(!1)}function e(){if(!v)return;v.showErrorMsg()}function f(a){if(!v)return;v.setupTagFriendsButton(a)}function h(){return!!(v&&v.isWaitingForTagSuggestions())}g.init=w;g.getInstance=x;g.isRunning=y;g.setUploadFinished=a;g.setUploadError=e;g.setupTagFriendsButton=f;g.isWaitingForTagSuggestions=h}),226);
__d("MUrlMap",["invariant","UrlMapConfig"],(function(a,b,c,d,e,f,g,h){function a(a){var b="https";if(a in c("UrlMapConfig"))return b+"://"+c("UrlMapConfig")[a];a in c("UrlMapConfig")||h(0,2511,a);return""}g.resolve=a}),98);
__d("MGraphApiVideoUploader",["MFBJSON","MUrlMap","URI","ZeroUploadSubdomainModule"],(function(a,b,c,d,e,f){var g,h=10;a=function(){"use strict";function a(a,b,c,d,e,f,g){this.$1=a,this.$3=b,this.$2=c,this.$13=d,this.$6=this.$1.size,this.$7=this.$1.name,this.$8=e,this.$9=f,this.$10=g,this.$11=!1}var c=a.prototype;c.startUploading=function(a){var b=this;a===void 0&&(a=h);var c=new FormData();c.append("file_size",this.$6);c.append("title",this.$7);c.append("upload_phase","start");c.append("access_token",this.$3);this.$13&&c.append("is_voice_clip",this.$13);var d=function(c){if(b.$11)return;if(!c||c.error){a==0?b.$9(c.error.error_user_msg):b.startUploading(a-1);return}b.$4=c.upload_session_id;b.$5=c.video_id;b.sendFileChunk(c.start_offset,c.end_offset,h)};this.postRequest("v2.4/"+this.$2+"/videos","POST",c,h,d)};c.getChunk=function(a,b){return this.$1.slice(a,b)};c.sendFileChunk=function(a,b,c){var d=this;c===void 0&&(c=h);if(this.$11)return;var e=new FormData();e.append("upload_phase","transfer");e.append("start_offset",a);e.append("upload_session_id",this.$4);e.append("access_token",this.$3);e.append("video_file_chunk",this.getChunk(a,b));var f=function(e){if(d.$11)return;if(!e||e.error){if(c==0){d.$9(e.error.error_user_msg);return}else d.sendFileChunk(a,b,c-1);return}d.$14(e)},g=this.$8&&function(c){var e=parseInt(a,10),f=parseInt(b,10);c=c.loaded/c.total;f=f-e;d.$8(Math.floor(e+c*f))};this.postRequest("v2.4/"+this.$2+"/videos","POST",e,h,f,g)};c.$14=function(a){a.start_offset!=a.end_offset?this.sendFileChunk(a.start_offset,a.end_offset,h):this.$9(!0)};c.postRequest=function(a,c,d,e,f,i){var j=this,k=b("MUrlMap").resolve("graph")+"/"+a,l=b("ZeroUploadSubdomainModule").subdomain;l!==""&&(k=new(g||(g=b("URI")))(k).setSubdomain(l).toString());d.pretty=d.pretty||0;this.$12=new XMLHttpRequest();this.$12.onload=function(){var a=b("MFBJSON").parse(j.$12.responseText);f(a)};i&&(this.$12.upload.onprogress=i);this.$12.onerror=function(){if(e==0){j.$10!==null&&j.$10();return}setTimeout(function(){j.postRequest(a,c,d,e-1,f)},1e3*Math.pow(2,h-e))};this.$12.open("post",k);this.$12.send(d)};c.getVideoID=function(){return this.$5};c.abort=function(){this.$11=!0,this.$12!==null&&this.$12.abort()};return a}();e.exports=a}),null);
__d("MMultiPhotoUploaderAttachmentType",[],(function(a,b,c,d,e,f){a="video";b="photo";f.VIDEO=a;f.PHOTO=b}),66);
__d("MMultiPhotoUploaderAttachment.react",["cx","fbt","ix","Image.react","MLoadingIndicator.react","MMultiPhotoUploaderAttachmentState","MMultiPhotoUploaderAttachmentType","MProgressBar.react","ShimButton.react","joinClasses","react","setTimeout"],(function(a,b,c,d,e,f,g,h,i){var j,k=j||b("react"),l=2,m=.7,n=500,o=1e4,p=250;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.$2=0,d.state={previewLoaded:!1},d.getTagCountIndicator=function(){if(d.props.state!==b("MMultiPhotoUploaderAttachmentState").UPLOADED&&d.props.state!==b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS)return null;if(!d.state.previewLoaded)return null;var a=d.props.tagCount;if(!a)return null;a="_5pt"+(a===1?" _5pu":"")+(a===2?" _5pv":"")+(a>2?" _5pw":"");return k.jsx("div",{className:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,(this.props.state===b("MMultiPhotoUploaderAttachmentState").UPLOADED||this.props.state===b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS)&&!this.state.previewLoaded&&this.loadPreview()};d.componentDidUpdate=function(a,c){if(this.refs.progressBar&&(this.props.state===b("MMultiPhotoUploaderAttachmentState").SENDING&&this.props.loaded&&this.props.totalSize))if(this.props.loaded===this.props.totalSize)this.refs.progressBar.animate(100,o);else{var d=100*m*this.props.loaded/this.props.totalSize;this.refs.progressBar.animate(d,n)}a.state===b("MMultiPhotoUploaderAttachmentState").SENDING&&this.props.state!==b("MMultiPhotoUploaderAttachmentState").SENDING&&this.props.state!==b("MMultiPhotoUploaderAttachmentState").ERROR&&this.loadPreview();!c.previewLoaded&&this.state.previewLoaded&&this.props.onPreviewLoaded&&this.props.onPreviewLoaded()};d.componentWillUnmount=function(){this.$1=!1};d.getLoadingIndicator=function(){if(this.props.hideUploadProgress)return null;return this.props.loaded>0&&!this.state.previewLoaded?this.getProgressBar():this.getSpinner()};d.getProgressBar=function(){if(this.props.state===b("MMultiPhotoUploaderAttachmentState").ERROR)return null;return this.state.previewLoaded?null:k.jsx("div",{className:"_r6h",children:k.jsx(b("MProgressBar.react"),{initialValue:0,ref:"progressBar"})})};d.getSpinner=function(){return this.props.state!==b("MMultiPhotoUploaderAttachmentState").SENDING&&this.props.state!==b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS?null:k.jsx("div",{className:"_451h"+(this.props.state===b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS?" _2d1s":""),children:k.jsx(b("MLoadingIndicator.react"),{className:"_5r-2"})})};d.loadPreview=function(){var a=this;if(this.props.type===b("MMultiPhotoUploaderAttachmentType").VIDEO){this.setState({previewLoaded:!0});return}var c=++this.$2;this.refs.progressBar&&this.refs.progressBar.animate(100,o);var d=new Image();d.onload=function(){if(!a.$1||c!==a.$2)return;a.refs.progressBar?(a.refs.progressBar.animate(100,p),b("setTimeout")(function(){if(!a.$1||c!==a.$2)return;a.setState({previewLoaded:!0})},p)):a.setState({previewLoaded:!0})};d.src=this.props.imageURI;(d.complete||d.width+d.height>0)&&(d.onload=null,this.setState({previewLoaded:!0}))};d.getPreviewWithLocalFile=function(a){var c=this.props.state===b("MMultiPhotoUploaderAttachmentState").SENDING||!this.state.previewLoaded;return c||!this.props.imageURI?!this.props.fileImageURI?null:k.jsx(b("Image.react"),{className:"_5r-3"+(c&&!this.props.hideUploadProgress?" _451j":""),src:this.props.fileImageURI,height:a,width:a}):k.jsx(b("Image.react"),{className:"_5r-3",src:this.props.imageURI,height:a,width:a})};d.getPreview=function(a,c){if(this.props.useLocalFilePreview)return this.getPreviewWithLocalFile(c);if(this.props.state!==b("MMultiPhotoUploaderAttachmentState").UPLOADED&&this.props.state!==b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS)return null;return!this.state.previewLoaded?null:k.jsx(b("Image.react"),{className:"_5r-3",src:this.props.imageURI,width:a,height:c})};d.getError=function(){return this.props.state!==b("MMultiPhotoUploaderAttachmentState").ERROR?null:k.jsx("div",{className:"_5r-4"})};d.getAbortButton=function(){var a=this.props.shouldShowWhiteDesign?"_3lx9":"_5r-6",c=this.props.shouldShowWhiteDesign?"_3lxa":"_5r-5",d=this.props.type===b("MMultiPhotoUploaderAttachmentType").VIDEO?h._("G\u1ee1 video"):h._("G\u1ee1 \u1ea3nh");return k.jsx(b("ShimButton.react"),{"aria-label":d,className:c,"data-sigil":"touchable",onClick:this.props.onRemoveClick,children:k.jsx("div",{className:a})})};d.getPhotoBorder=function(){var a=null;this.props.shouldShowWhiteDesign&&(a=k.jsx("div",{className:"_23rn"}));return a};d.getSphericalPhotoIcon=function(){return!this.props.isSpherical?null:k.jsx("div",{className:"_42p8"+(!this.state.previewLoaded||this.props.state!==b("MMultiPhotoUploaderAttachmentState").UPLOADED&&this.props.state!==b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS?" _42p9":"")})};d.getVideoBadge=function(){return this.props.type!==b("MMultiPhotoUploaderAttachmentType").VIDEO?null:k.jsx("div",{className:"_451k",children:k.jsx(b("Image.react"),{className:"_451l",src:i("484861")})})};d.render=function(){var a=this,c;this.props.shouldShowWhiteDesign?c="_s50":this.props.shouldShowLargeThumbnails?c="_3vnj":c="_51s2";var d=this.props.previewSize-l,e=d;(this.props.state===b("MMultiPhotoUploaderAttachmentState").UPLOADED||this.props.state===b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS)&&this.state.previewLoaded&&this.props.shouldShowLargeThumbnails&&this.props.thumbnail_width&&this.props.thumbnail_height&&(e=Math.floor(this.props.thumbnail_width*d/this.props.thumbnail_height));var f=this.props.useLocalFilePreview?{}:{width:e};return k.jsxs("div",{className:b("joinClasses")(this.props.className,c),style:f,children:[k.jsxs("div",{onClick:function(){if(a.props.type===b("MMultiPhotoUploaderAttachmentType").VIDEO)return;a.props.onThumbnailClicked()},"data-sigil":"touchable",role:"presentation",children:[this.getPreview(e,d),this.getLoadingIndicator(),this.getError(),this.getTagCountIndicator(),this.getPhotoBorder(),this.getSphericalPhotoIcon(),this.getVideoBadge()]}),this.getAbortButton()]})};return c}(k.Component);e.exports=a}),130);
__d("MMultiPhotoUploaderHiddenInputs.react",["prop-types","react"],(function(a,b,c,d,e,f){var g,h=g||b("react");a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=null;this.props.waterfallSource&&(a=h.jsx("input",{name:"waterfall_source",type:"hidden",value:this.props.waterfallSource}));return h.jsxs("div",{children:[a,this.props.photo_fbids.map(function(a){return h.jsx("input",{type:"hidden",name:"photo_ids["+a+"]",value:a},a)}),this.props.video_fbids.map(function(a){return h.jsx("input",{type:"hidden",name:"video_ids["+a+"]",value:a},a)})]})};return b}(h.Component);a.propTypes={photo_fbids:b("prop-types").array.isRequired,video_fbids:b("prop-types").array.isRequired,waterfallSource:b("prop-types").string};e.exports=a}),null);
__d("MMultiPhotoUploaderPlusAttachment.react",["cx","fbt","MXUILayout.react","MXUILayoutFillColumn.react","ShimButton.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||b("react");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getAttachmentChildContainer=function(){if(!this.props.shouldShowWhiteDesign)return null;var a=this.props.shouldShowAddPhotoLabel?j.jsx("div",{className:"_vbw",children:h._("\u1ea2nh")}):null,c=this.props.shouldShowAddVideoLabel?j.jsx("div",{className:"_vbw",children:h._("Video")}):null;return j.jsx(b("MXUILayout.react"),{children:j.jsx(b("MXUILayoutFillColumn.react"),{alignself:"center",className:"_2-24",children:j.jsxs("div",{className:"_vbx",children:[j.jsx("div",{className:"_vby"}),a,c]})})})};d.getAttachmentClass=function(){var a,b=this.props.largeThumbnails;this.props.shouldShowWhiteDesign?a="_vbz":a=(b?"_3vnj":"")+(b?"":" _51s2")+(b?" _14y0":"")+(b?"":" _5e0r");return a};d.render=function(){var a,c=this.getAttachmentClass(),d=this.getAttachmentChildContainer();return j.jsx(b("ShimButton.react"),{"aria-label":(a=this.props.label)!=null?a:h._("Th\u00eam \u1ea3nh"),className:c,"data-sigil":"touchable",onClick:this.props.onClick,children:d})};return c}(j.Component);e.exports=a}),130);
__d("MPhotoUploadDisable",["fbt","MDOM","Stratcom"],(function(a,b,c,d,e,f,g){a={IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE:g._("R\u1ea5t ti\u1ebfc, t\u1ea3i \u1ea3nh l\u00ean hi\u1ec7n kh\u00f4ng kh\u1ea3 d\u1ee5ng v\u1edbi Safari trong iOS 8.0 v\u00e0 8.0.1. Apple \u0111\u00e3 s\u1eeda l\u1ed7i n\u00e0y trong phi\u00ean b\u1ea3n iOS m\u1edbi nh\u1ea5t. Vui l\u00f2ng n\u00e2ng c\u1ea5p l\u00ean iOS 8.0.2 v\u00e0 th\u1eed l\u1ea1i."),alertIOS8FileUploadDisabled:function(a){alert(this.IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE),a.kill()},disableIOS8FileUpload:function(a){this._listeners=[b("MDOM").listen(a,"click",null,this.alertIOS8FileUploadDisabled.bind(this)),b("Stratcom").listen("m:page:unload",null,this._cleanup.bind(this))]},_cleanup:function(){this._listeners.forEach(function(a){a.remove()})}};e.exports=a}),130);
__d("MPhotoUploadFileInput",["MDOM","MTouchClick"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.setChangeHandler=function(a){this.$2&&this.$2.remove(),this.$3=a,this.$3!=null&&(this.$2=b("MDOM").listen(this.$1,"change",null,this.$3))};c.setClickHandler=function(a){this.$4&&this.$4.remove(),this.$5=a,this.$5!=null&&(this.$4=b("MDOM").listen(this.$1,"click",null,this.$5))};c.destroy=function(){this.setChangeHandler(null),this.setClickHandler(null)};c.getDOMElement=function(){return this.$1};c.cloneDOMNode=function(){var a=this.$1;this.$1=a.cloneNode(!0);this.$1.value="";b("MDOM").replace(a,this.$1);this.$3&&this.setChangeHandler(this.$3);this.$5&&this.setClickHandler(this.$5);return a};c.click=function(a){var c=a.nativeEvent,d=c.changedTouches;b("MTouchClick").click(this.$1,{getRawEvent:function(){return c},getTouch:function(){return d&&d[0]||{}}})};return a}();e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/vYaRhD_0hEI/
 */
__d("MegaPixImage",[],(function(a,b,c,d,e,f){function g(a){var b=a.naturalWidth,c=a.naturalHeight;if(b*c>1024*1024){c=document.createElement("canvas");c.width=c.height=1;c=c.getContext("2d");c.drawImage(a,-b+1,0);return c.getImageData(0,0,1,1).data[3]===0}else return!1}function h(a,b,c){b=document.createElement("canvas");b.width=1;b.height=c;b=b.getContext("2d");b.drawImage(a,0,0);a=b.getImageData(0,0,1,c).data;b=0;var d=c,e=c;while(e>b){var f=a[(e-1)*4+3];f===0?d=e:b=e;e=d+b>>1}f=e/c;return f===0?1:f}function i(a,b,c){var d=document.createElement("canvas");j(a,d,b,c);return d.toDataURL("image/jpeg",b.quality||.8)}function j(a,b,c,d){var e=a.naturalWidth,f=a.naturalHeight,i=c.width,j=c.height,l=b.getContext("2d");l.save();k(b,i,j,c.orientation);b=g(a);b&&(e/=2,f/=2);c=1024;b=document.createElement("canvas");b.width=b.height=c;var m=b.getContext("2d");d=d?h(a,e,f):1;i=Math.ceil(c*i/e);j=Math.ceil(c*j/f/d);d=0;var n=0;while(d<f){var o=0,p=0;while(o<e)m.clearRect(0,0,c,c),m.drawImage(a,-o,-d),l.drawImage(b,0,0,c,c,p,n,i,j),o+=c,p+=i;d+=c;n+=j}l.restore();b=m=null}function k(a,b,c,d){switch(d){case 5:case 6:case 7:case 8:a.width=c;a.height=b;break;default:a.width=b,a.height=c}a=a.getContext("2d");switch(d){case 2:a.translate(b,0);a.scale(-1,1);break;case 3:a.translate(b,c);a.rotate(Math.PI);break;case 4:a.translate(0,c);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-c);break;case 7:a.rotate(.5*Math.PI);a.translate(b,-c);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI);a.translate(-b,0);break;default:break}}var l=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;function a(a){if(a instanceof Blob){var b=new Image();if(!l)throw Error("No createObjectURL function found to create blob url");b.src=l.createObjectURL(a);this.blob=a;a=b}if(!a.naturalWidth&&!a.naturalHeight){var c=this;a.onload=function(){var a=c.imageLoadListeners;if(a){c.imageLoadListeners=null;for(var b=0,d=a.length;b<d;b++)a[b]()}};this.imageLoadListeners=[]}this.srcImage=a}a.isSupported=!!l;a.prototype.render=function(a,b){if(this.imageLoadListeners){var c=this;this.imageLoadListeners.push(function(){c.render(a,b)});return}b=b||{};var d=this.srcImage.naturalWidth,e=this.srcImage.naturalHeight,f=b.width,g=b.height,h=b.maxWidth,k=b.maxHeight,l=!this.blob||this.blob.type==="image/jpeg";f&&!g?g=e*f/d<<0:g&&!f?f=d*g/e<<0:(f=d,g=e);h&&f>h&&(f=h,g=e*f/d<<0);k&&g>k&&(g=k,f=d*g/e<<0);h={width:f,height:g};for(k in b)h[k]=b[k];d=a.tagName.toLowerCase();d==="img"?a.src=i(this.srcImage,h,l):d==="canvas"&&j(this.srcImage,a,h,l);typeof this.onrender==="function"&&this.onrender(a)};e.exports=a}),null);
__d("PhotosUploadWaterfallXMixin",["invariant","Banzai","PhotosUploadWaterfallXConfig","cr:7670","randomInt"],(function(a,b,c,d,e,f,g){var h=new Map();function i(a,c){var d={};a.client_time=Math.round(Date.now()/1e3);b("PhotosUploadWaterfallXConfig").retryBanzai&&(d.retry=!0,a.nonce=b("randomInt")(4294967296));b("Banzai").post(b("PhotosUploadWaterfallXConfig").banzaiRoute,a,d);c&&setTimeout(c,0)}function j(a,c){if(b("PhotosUploadWaterfallXConfig").useBanzai)i(a,c);else{a=new(b("cr:7670"))(b("PhotosUploadWaterfallXConfig").loggingEndpoint,{data:JSON.stringify(a)}).setHandler(c);b("PhotosUploadWaterfallXConfig").timeout&&a.setTimeout(10*1e3);a.send()}}e.exports={logStep:function(a,b,c){var d=this.getWaterfallID&&this.getWaterfallID(),e=this.getWaterfallAppName&&this.getWaterfallAppName();if(!d||!e)return;j(babelHelpers["extends"]({step:a,qn:d,uploader:e,ref:this.getWaterfallSource&&this.getWaterfallSource()},b),c)},logPUWStep:function(a,b,c,d,e,f,g){if(f&&f.logOncePerSession){h.has(b)||h.set(b,new Set());if(h.get(b).has(a))return;h.get(b).add(a)}j(babelHelpers["extends"]({step:a,qn:b,uploader:c,ref:d},e),g)}}}),null);
__d("base64toUint8Array",[],(function(a,b,c,d,e,f){function a(a){a=atob(a);var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}e.exports=a}),null);
__d("getExifOrientation",["DataViewPolyfill"],(function(a,b,c,d,e,f){var g=a.DataView||b("DataViewPolyfill");function c(a,b){var c=new FileReader();c.onload=function(a){var c="Exif\0\0",d=0,e;a=new g(a.target.result);for(var f=0;f<250;f++)if(a.getUint8(f)===c.charCodeAt(d)){d+=1;e=f+1;if(d===c.length)break}else d=0;if(!d){b(null);return}if(a.getUint8(e)==77&&a.getUint8(e+1)==77)f=!1;else if(a.getUint8(e)==73&&a.getUint8(e+1)==73)f=!0;else{b(null);return}e+=2;e+=2;var h;c=a.getUint32(e,f);e+=c-8+4;d=a.getUint16(e,f);e+=2;for(c=0;c<Math.min(25,d);c++){h=a.getUint16(e,f);e+=8;if(h==274){h=a.getUint16(e,f);b(h);return}e+=4}b(null)};c.readAsArrayBuffer(a)}e.exports=c}),null);
__d("MPhotoResizer",["invariant","MegaPixImage","PhotosUploadWaterfallXMixin","Vector","base64toUint8Array","getExifOrientation","mixin","performanceNow","requestAnimationFrame"],(function(a,b,c,d,e,f,g){var h,i="data:image/jpeg;base64,";a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MPhotoResizer1=new(b("Vector"))(960,960);c.$MPhotoResizer2=.85;return c}var d=c.prototype;d.setFile=function(a){this.$MPhotoResizer3=a;return this};d.setDimensions=function(a){this.$MPhotoResizer1=a;return this};d.setQuality=function(a){this.$MPhotoResizer2=a;return this};d.setHandler=function(a){this.$MPhotoResizer4=a;return this};d.setWaterfall=function(a,b,c){this.$MPhotoResizer5=a;this.$MPhotoResizer6=b;this.$MPhotoResizer7=c;return this};d.resize=function(){var a=this;this.$MPhotoResizer3||g(0,3432);this.$MPhotoResizer1||g(0,3433);this.$MPhotoResizer2||g(0,3434);this.$MPhotoResizer4||g(0,3435);this.$MPhotoResizer5||g(0,3436);this.$MPhotoResizer6||g(0,3437);if(!b("MegaPixImage").isSupported){this.logStep("client_process_unavailable",{error:"canvas_not_supported"});this.$MPhotoResizer4(this.$MPhotoResizer3);return}if(!this.$MPhotoResizer8()){this.logStep("client_process_unavailable",{error:"no_jpeg_output"});this.$MPhotoResizer4(this.$MPhotoResizer3);return}this.logStep("client_process_begin");var c=(h||(h=b("performanceNow")))();b("getExifOrientation")(this.$MPhotoResizer3,function(d){b("requestAnimationFrame")(function(){var e=document.createElement("canvas"),f=new(b("MegaPixImage"))(a.$MPhotoResizer3);f.onrender=function(){b("requestAnimationFrame")(function(){var d=e.toDataURL("image/jpeg",a.$MPhotoResizer2);e=null;d=d.substr(i.length);b("requestAnimationFrame")(function(){var e=b("base64toUint8Array")(d);d=null;e=new Blob([e.buffer],{type:"image/jpeg"});a.logStep("client_process_success",{timeResizing:(h||(h=b("performanceNow")))()-c,originalSize:a.$MPhotoResizer3&&a.$MPhotoResizer3.size,resizedSize:e&&e.size});a.$MPhotoResizer4(e)})})};f.render(e,{maxWidth:a.$MPhotoResizer1.x,maxHeight:a.$MPhotoResizer1.y,orientation:d})})})};d.$MPhotoResizer8=function(){var a=document.createElement("canvas");a.width=1;a.height=1;a=a.toDataURL("image/jpeg");return a.substr(0,i.length)===i};d.getWaterfallID=function(){return this.$MPhotoResizer5};d.getWaterfallAppName=function(){return this.$MPhotoResizer6};d.getWaterfallSource=function(){return this.$MPhotoResizer7};return c}(b("mixin")(b("PhotosUploadWaterfallXMixin")));e.exports=a}),null);
__d("XMobilePhotosSaveUnpublishedController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/_mupload_/photo/x/saveunpublished/",{privacy_mutation_token:{type:"String"},allow_spherical_photo:{type:"Bool",defaultValue:!1},thumbnail_width:{type:"Int"},thumbnail_height:{type:"Int"},waterfall_app_name:{type:"String"},waterfall_id:{type:"String"},waterfall_source:{type:"String"},filter_type:{type:"Int"},upload_id:{type:"String"},target_id:{type:"Int"},csid:{type:"String"},js_request_module_name:{type:"String"}})}),null);
__d("supportsXHR2",["memoize"],(function(a,b,c,d,e,f){function a(){if(!window.FormData||!window.XMLHttpRequest)return!1;var a=new XMLHttpRequest();return"upload"in a&&"withCredentials"in a}e.exports=b("memoize")(a)}),null);
__d("MPhotoUploadRequest",["invariant","ActorURI","CurrentUser","DTSGUtils","MDOM","MPhotoResizer","MRequest","PhotosUploadWaterfallXMixin","SprinkleConfig","Vector","XMobilePhotosSaveUnpublishedController","lowerFacebookDomain","mixin","performanceNow","supportsXHR2"],(function(a,b,c,d,e,f,g){var h;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MPhotoUploadRequest1=0;return b}var d=c.prototype;d.setClonedFileInput=function(a){this.$MPhotoUploadRequest2=a;return this};d.setAttachedFile=function(a){this.$MPhotoUploadRequest3=a;return this};d.setDTSG=function(a){this.$MPhotoUploadRequest4=a;this.$MPhotoUploadRequest5=b("DTSGUtils").getNumericValue(a);return this};d.setUploadDomain=function(a){this.$MPhotoUploadRequest6=a;return this};d.setWaterfall=function(a,b,c){this.$MPhotoUploadRequest7=a;this.$MPhotoUploadRequest8=b;this.$MPhotoUploadRequest9=c;return this};d.setHandler=function(a){this.$MPhotoUploadRequest10=a;return this};d.setProgressHandler=function(a){this.$MPhotoUploadRequest11=a;return this};d.setErrorHandler=function(a){this.$MPhotoUploadRequest12=a;return this};d.setThumbnailDimensions=function(a){this.$MPhotoUploadRequest13=a;return this};d.setResizeType=function(a){this.$MPhotoUploadRequest14=a;return this};d.setTargetID=function(a){this.$MPhotoUploadRequest15=a;return this};d.setActorID=function(a){this.$MPhotoUploadRequest16=a;return this};d.setAllowSphericalPhoto=function(a){this.$MPhotoUploadRequest17=a;return this};d.setJpegResizer=function(a){return this};d.send=function(){this.$MPhotoUploadRequest2||g(0,801);this.$MPhotoUploadRequest6||g(0,802);this.$MPhotoUploadRequest4||g(0,803);this.$MPhotoUploadRequest5||g(0,13178);this.$MPhotoUploadRequest7||g(0,804);this.$MPhotoUploadRequest8||g(0,805);this.$MPhotoUploadRequest9||g(0,806);this.$MPhotoUploadRequest10||g(0,807);this.$MPhotoUploadRequest13||g(0,808);!this.$MPhotoUploadRequest18&&!this.$MPhotoUploadRequest19||g(0,809);!b("supportsXHR2")()?this.$MPhotoUploadRequest20():this.$MPhotoUploadRequest21();return this};d.$MPhotoUploadRequest22=function(a,b){this.logStep(a,babelHelpers["extends"]({retriesNeeded:this.$MPhotoUploadRequest1},b||{}))};d.abort=function(a){if(!this.$MPhotoUploadRequest2)return;this.$MPhotoUploadRequest22("client_transfer_cancel",{elapsed_time:(h||(h=b("performanceNow")))()-this.transferStartTime,bytes:this.fileSize,progress:a});b("supportsXHR2")()?this.$MPhotoUploadRequest23():this.$MPhotoUploadRequest24()};d.retry=function(){this.$MPhotoUploadRequest1++,this.abort(),this.send()};d.$MPhotoUploadRequest25=function(){var a=this.$MPhotoUploadRequest2.files;return a&&a.item&&a.item(0)&&a.item(0).size};d.$MPhotoUploadRequest26=function(){var a=b("XMobilePhotosSaveUnpublishedController").getURIBuilder().setBool("allow_spherical_photo",this.$MPhotoUploadRequest17).setInt("thumbnail_width",this.$MPhotoUploadRequest13.x).setInt("thumbnail_height",this.$MPhotoUploadRequest13.y).setString("waterfall_id",this.$MPhotoUploadRequest7).setString("waterfall_app_name",this.$MPhotoUploadRequest8).setString("waterfall_source",this.$MPhotoUploadRequest9).setInt("target_id",this.$MPhotoUploadRequest15).getURI().setProtocol(this.$MPhotoUploadRequest6.getProtocol()).setDomain(this.$MPhotoUploadRequest6.getDomain());return b("ActorURI").create(a,this.$MPhotoUploadRequest16)};d.$MPhotoUploadRequest21=function(){var a=this,c=this.$MPhotoUploadRequest3,d=this.$MPhotoUploadRequest14||"no_resize";c&&d=="canvas_resize"?new(b("MPhotoResizer"))().setFile(c).setWaterfall(this.$MPhotoUploadRequest7,this.$MPhotoUploadRequest8,this.$MPhotoUploadRequest9).setHandler(function(b){a.$MPhotoUploadRequest27(b)}).setDimensions(new(b("Vector"))(2048,2048)).resize():this.$MPhotoUploadRequest27(c)};d.$MPhotoUploadRequest27=function(a){var c=this,d=new FormData();d.append(this.$MPhotoUploadRequest2.name,a);this.fileSize=a.size;this.transferStartTime=(h||(h=b("performanceNow")))();this.$MPhotoUploadRequest22("client_transfer_begin",{bytes:this.fileSize});a=this.$MPhotoUploadRequest18=new(b("MRequest"))(this.$MPhotoUploadRequest26()).setCORS(!0).setData((a={fb_dtsg:this.$MPhotoUploadRequest4},a[b("SprinkleConfig").param_name]=this.$MPhotoUploadRequest5,a)).setRawData(d);a.listen("open",function(a){a=a.getTransport();a.withCredentials=!0});a.listen("done",function(a){c.$MPhotoUploadRequest22("client_transfer_success",{elapsed_time:(h||(h=b("performanceNow")))()-c.transferStartTime,bytes:c.fileSize,fbid:a.fbid}),c.$MPhotoUploadRequest10(a)});a.listen("error",function(a){c.$MPhotoUploadRequest22("client_transfer_fail",{error_type:"mrequest_fail",elapsed_time:(h||(h=b("performanceNow")))()-c.transferStartTime,bytes:c.fileSize}),c.$MPhotoUploadRequest12&&c.$MPhotoUploadRequest12(a)});a.listen("uploadprogress",function(a){c.$MPhotoUploadRequest11&&c.$MPhotoUploadRequest11(a)});a.send()};d.$MPhotoUploadRequest23=function(){this.$MPhotoUploadRequest18&&this.$MPhotoUploadRequest18.abort(),this.$MPhotoUploadRequest18=null};d.$MPhotoUploadRequest28=function(a,c){return b("MDOM").create("input",{type:"hidden",name:a,value:c})};d.$MPhotoUploadRequest20=function(){var a,c=this,d,e="MPhotoUpload"+i++,f=this.$MPhotoUploadRequest19=(d=b("MDOM")).create("iframe",{name:e,id:e});f.style.display="none";var g=this.$MPhotoUploadRequest29=d.create("form",{target:e,action:this.$MPhotoUploadRequest26().toString(),method:"POST",enctype:"multipart/form-data"});g.style.display="none";a=(a={fb_dtsg:this.$MPhotoUploadRequest4},a[b("SprinkleConfig").param_name]=this.$MPhotoUploadRequest5,a.__a=1,a.__user=b("CurrentUser").getID(),a.upload_id=e,a);for(var k in a)b("MDOM").appendContent(g,this.$MPhotoUploadRequest28(k,a[k]));d.appendContent(document.body,f);d.appendContent(document.body,g);d.appendContent(g,this.$MPhotoUploadRequest2);this.fileSize=this.$MPhotoUploadRequest25();j[e]=function(a){if(!a){c.$MPhotoUploadRequest30("no_payload");return}delete j[e];c.$MPhotoUploadRequest24();c.$MPhotoUploadRequest22("client_transfer_success",{elapsed_time:(h||(h=b("performanceNow")))()-c.transferStartTime,bytes:c.fileSize,fbid:a.fbid});c.$MPhotoUploadRequest10(a)};f.onerror=this.$MPhotoUploadRequest30.bind("iframe_onerror");this.transferStartTime=(h||(h=b("performanceNow")))();this.$MPhotoUploadRequest22("client_transfer_begin",{bytes:this.fileSize});b("lowerFacebookDomain")();g.submit()};d.$MPhotoUploadRequest30=function(a){this.$MPhotoUploadRequest22("client_transfer_fail",{error_type:a,elapsed_time:(h||(h=b("performanceNow")))()-this.transferStartTime,bytes:this.fileSize}),this.$MPhotoUploadRequest12&&this.$MPhotoUploadRequest12(),this.$MPhotoUploadRequest24()};d.$MPhotoUploadRequest24=function(){this.$MPhotoUploadRequest19&&b("MDOM").remove(this.$MPhotoUploadRequest19),this.$MPhotoUploadRequest19=null,this.$MPhotoUploadRequest29&&b("MDOM").remove(this.$MPhotoUploadRequest29),this.$MPhotoUploadRequest29=null};d.getWaterfallID=function(){return this.$MPhotoUploadRequest7};d.getWaterfallAppName=function(){return this.$MPhotoUploadRequest8};d.getWaterfallSource=function(){return this.$MPhotoUploadRequest9};c.handleResponse=function(a,b){j[a](b)};return c}(b("mixin")(b("PhotosUploadWaterfallXMixin")));var i=0,j={};e.exports=a}),null);
__d("MVideoUploadRequest",["invariant","MGraphApiVideoUploader","PhotosUploadWaterfallXMixin","mixin","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$MVideoUploadRequest$p_15=!1,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.setClonedFileInput=function(a){this.$MVideoUploadRequest$p_2=a;return this};d.setWaterfall=function(a,b,c){this.$MVideoUploadRequest$p_3=a;this.$MVideoUploadRequest$p_4=b;this.$MVideoUploadRequest$p_5=c;return this};d.setHandler=function(a){this.$MVideoUploadRequest$p_6=a;return this};d.setProgressHandler=function(a){this.$MVideoUploadRequest$p_7=a;return this};d.setErrorHandler=function(a){this.$MVideoUploadRequest$p_8=a;return this};d.setThumbnailDimensions=function(a){this.$MVideoUploadRequest$p_9=a;return this};d.setTargetID=function(a){this.$MVideoUploadRequest$p_10=a;return this};d.setActorID=function(a){this.$MVideoUploadRequest$p_11=a;return this};d.setAccessToken=function(a){this.$MVideoUploadRequest$p_12=a;return this};d.setFileIndex=function(a){this.$MVideoUploadRequest$p_14=a;return this};d.setIsVoiceClip=function(){this.$MVideoUploadRequest$p_15=!0;return this};d.getFile=function(){return this.$MVideoUploadRequest$p_2.files[this.$MVideoUploadRequest$p_14]};d.send=function(){var a=this;this.$MVideoUploadRequest$p_2||g(0,801);this.$MVideoUploadRequest$p_6||g(0,807);this.$MVideoUploadRequest$p_13&&g(0,809);this.$MVideoUploadRequest$p_13=new(b("MGraphApiVideoUploader"))(this.getFile(),this.$MVideoUploadRequest$p_12,this.$MVideoUploadRequest$p_10,this.$MVideoUploadRequest$p_15,function(b){return a.$MVideoUploadRequest$p_7({loaded:b,total:a.$MVideoUploadRequest$p_16()})},function(){return a.$MVideoUploadRequest$p_6({fbid:a.$MVideoUploadRequest$p_13.getVideoID()})},function(){var b=a.$MVideoUploadRequest$p_8;b!=null&&b({fbid:a.$MVideoUploadRequest$p_13.getVideoID()})});this.$MVideoUploadRequest$p_13.startUploading();return this};d.$MVideoUploadRequest$p_17=function(a,b){this.logStep(a,babelHelpers["extends"]({retriesNeeded:this.$MVideoUploadRequest$p_1},b||{}))};d.abort=function(a){if(!this.$MVideoUploadRequest$p_2)return;this.$MVideoUploadRequest$p_13&&this.$MVideoUploadRequest$p_13.abort();this.$MVideoUploadRequest$p_13=null;this.$MVideoUploadRequest$p_17("client_transfer_cancel",{elapsed_time:(h||(h=b("performanceNow")))()-this.transferStartTime,bytes:this.fileSize,progress:a})};d.retry=function(){this.$MVideoUploadRequest$p_1++,this.abort(),this.send()};d.$MVideoUploadRequest$p_16=function(){var a=this.getFile();return a&&a.size};d.getWaterfallID=function(){return this.$MVideoUploadRequest$p_3};d.getWaterfallAppName=function(){return this.$MVideoUploadRequest$p_4};d.getWaterfallSource=function(){return this.$MVideoUploadRequest$p_5};return c}(b("mixin")(b("PhotosUploadWaterfallXMixin")));e.exports=a}),null);
__d("MMultiPhotoUploader.react",["cx","fbt","Bootloader","MEvent","MMultiPhotoUploaderAttachment.react","MMultiPhotoUploaderAttachmentState","MMultiPhotoUploaderAttachmentType","MMultiPhotoUploaderHiddenInputs.react","MMultiPhotoUploaderPlusAttachment.react","MPhotoUploadDisable","MPhotoUploadFileInput","MPhotoUploadRequest","MSphericalPhotoConfig","MVideoUploadRequest","PhotosUploadWaterfallXMixin","ReactDOM","Stratcom","URI","Vector","createReactClass_DEPRECATED","forEachObject","intlNumUtils","promiseDone","prop-types","react","throttle"],(function(a,b,c,d,e,f,g,h){var i,j,k=b("ReactDOM").createPortal,l=i||(i=b("react")),m=0,n=80,o=56,p;a=b("createReactClass_DEPRECATED")({displayName:"MMultiPhotoUploader",_pendingUploadRequests:{},propTypes:{dtsg:b("prop-types").string.isRequired,fileInput:b("prop-types").instanceOf(b("MPhotoUploadFileInput")).isRequired,videoFileInput:b("prop-types").instanceOf(b("MPhotoUploadFileInput")),formHiddenInputs:b("prop-types").instanceOf(HTMLElement).isRequired,uploadDomain:b("prop-types").instanceOf(j||(j=b("URI"))).isRequired,allowVideo:b("prop-types").bool.isRequired,useLocalFilePreview:b("prop-types").bool.isRequired,separatePhotoAndVideo:b("prop-types").bool.isRequired,waterfallID:b("prop-types").string.isRequired,waterfallAppName:b("prop-types").string.isRequired,waterfallSource:b("prop-types").string.isRequired,actorID:b("prop-types").string,targetID:b("prop-types").string,maxPhotosAllowed:b("prop-types").number,initCollapsed:b("prop-types").bool,logFlowBeginOnClick:b("prop-types").bool,shouldScroll:b("prop-types").bool,shouldShowLargeThumbnails:b("prop-types").bool,shouldShowWhiteDesign:b("prop-types").bool,shouldShowAddPhotoLabel:b("prop-types").bool,showDropShadow:b("prop-types").bool,disableIOS8SafariAlert:b("prop-types").bool,accessToken:b("prop-types").string,hideUploadProgress:b("prop-types").bool,onUploadSuccess:b("prop-types").func,onRemove:b("prop-types").func,onThumbnailClicked:b("prop-types").func,onUploadStarted:b("prop-types").func,startPollingTagSuggestionsCallback:b("prop-types").func,initialPhotos:b("prop-types").array},mixins:[b("PhotosUploadWaterfallXMixin")],setCollapsed:function(a){this.collapsed=a,this.setState({collapsed:a})},isCollapsed:function(){return this.collapsed},allowSingleAttachment:function(){return+this.props.maxPhotosAllowed===1},getAttachmentCount:function(){return this.attachments.length},hasAttachments:function(){return this.attachments.length>0},hasVideos:function(){return this.state.attachments.filter(function(a){return a.state===b("MMultiPhotoUploaderAttachmentState").UPLOADED&&a.type===b("MMultiPhotoUploaderAttachmentType").VIDEO}).length>0},clearAttachments:function(){this.setAttachments(this.attachments.filter(function(a){a.state===b("MMultiPhotoUploaderAttachmentState").SENDING&&a.request.abort();return!1}))},getInitialState:function(){var a=this.props.initialPhotos;if(a!==null){for(var c=0;c<a.length;c++)a[c].id=m++,a[c].state=b("MMultiPhotoUploaderAttachmentState").UPLOADED;c={};c[b("MMultiPhotoUploaderAttachmentState").UPLOADED]=a.length;b("Stratcom").invoke("MMultiPhotoUploader:attachments:change",null,c)}this.attachments=a?a:[];this.collapsed=(c=this.props.initCollapsed)!=null?c:!1;this._throttledProgressUpdate=b("throttle").acrossTransitions(this._invokeProgressUpdate,400,this);return{attachments:this.attachments,collapsed:this.collapsed}},numAttachmentsWithState:function(a){return this.attachments.filter(function(b){return b.state===a}).length},numAttachmentsOfType:function(a){return this.attachments.filter(function(b){return b.type===a}).length},isMaxAttachmentReached:function(){return this.attachments.length>=this.props.maxPhotosAllowed},setAttachments:function(a){b("Stratcom").invoke("multi-photos-attachment-change",null,{attachments:a,multiPhotoUploader:this}),this.setAttachmentsSilent(a)},setAttachmentsSilent:function(a){this.attachments=a;this.setState({attachments:a});a=this.props.fileInput.getDOMElement();a.disabled=this.isMaxAttachmentReached();b("Stratcom").invoke("multi-photos-change",null,{input_id:a.id});a={input_id:a.id};for(var c in b("MMultiPhotoUploaderAttachmentState")){if(!Object.prototype.hasOwnProperty.call(b("MMultiPhotoUploaderAttachmentState"),c)||typeof b("MMultiPhotoUploaderAttachmentState")[c]!=="string")continue;var d=b("MMultiPhotoUploaderAttachmentState")[c];a[d]=this.numAttachmentsWithState(d)}b("Stratcom").invoke("MMultiPhotoUploader:attachments:change",null,a)},addAttachment:function(a){b("Stratcom").invoke("MMultiPhotoUploader:attachments:add",null,{photo_count:a.length||1}),this.setAttachments(this.attachments.concat([a]))},removeAttachment:function(a){var c=this;b("Stratcom").invoke("MMultiPhotoUploader:attachments:remove",null,{photo_count:1});this.setAttachments(this.attachments.filter(function(d){if(d.id===a){if(d.state===b("MMultiPhotoUploaderAttachmentState").SENDING){var e=0;d.totalSize&&(e=Math.floor(100*(d.loaded/d.totalSize)));d.request.abort(e)}else c.logStep("client_upload_remove",{fbid:d.fbid});d.fbid&&(c.props.onRemove&&c.props.onRemove(d.fbid));return!1}return!0}))},updateAttachment:function(a){this.setAttachments(this.attachments.map(function(b){return b.id===a.id?a:b}))},getAttachment:function(a){return this.attachments.filter(function(b){return b.id===a})[0]},setAttachmentProps:function(a,b){a=this.getAttachment(a);var c={};for(var d in a)c[d]=a[d];for(d in b)c[d]=b[d];this.updateAttachment(c)},retryAttachment:function(a){var b=this.getAttachment(a);this.logStep("client_attempt_retry",{fbid:b.fbid});b.request.retry();this.updateAttachment({id:a,state:"sending",request:b.request,isSpherical:b.isSpherical,type:b.type,fileImageURI:b.fileImageURI})},setAttachmentTagCounts:function(a){this.setAttachmentsSilent(this.attachments.map(function(b){b.tagCount=a[b.id];return b}))},componentDidMount:function(){this.props.fileInput.setChangeHandler(this.onFileInputChange),this.props.fileInput.setClickHandler(this.onFileInputClick),this.props.videoFileInput&&(this.props.videoFileInput.setChangeHandler(this.onVideoFileInputChange),this.props.videoFileInput.setClickHandler(this.onVideoFileInputClick)),!this.hasAttachments()&&!this.props.logFlowBeginOnClick&&this.logStep("client_flow_begin"),this.resizeAndScroll()},componentWillUnmount:function(){this.props.fileInput.setChangeHandler(null),this.props.fileInput.setClickHandler(null),this.props.videoFileInput&&(this.props.videoFileInput.setChangeHandler(null),this.props.videoFileInput.setClickHandler(null)),b("forEachObject")(this._pendingUploadRequests,function(a){return a.abort()}),delete this._pendingUploadRequests},onFileInputChange:function(){var a=this.props.fileInput.getDOMElement();b("Stratcom").invoke("MMultiPhotoUploader:input:change",null,{input:a});this.uploadAttachments(this.props.fileInput)},onVideoFileInputChange:function(){var a=this.props.videoFileInput.getDOMElement();b("Stratcom").invoke("MMultiPhotoUploader:input:change",null,{input:a});this.uploadAttachments(this.props.videoFileInput)},onFileInputClick:function(a){this.props.disableIOS8SafariAlert===!0&&b("MPhotoUploadDisable").alertIOS8FileUploadDisabled(a),!this.hasAttachments()&&this.props.logFlowBeginOnClick&&this.logStep("client_flow_begin"),this.logStep("client_select_begin"),b("Stratcom").invoke("MMultiPhotoUploader:input:click",null,{input:this.props.fileInput.getDOMElement()})},onVideoFileInputClick:function(a){this.props.disableIOS8SafariAlert===!0&&b("MPhotoUploadDisable").alertIOS8FileUploadDisabled(a),!this.hasAttachments()&&this.props.logFlowBeginOnClick&&this.logStep("client_flow_begin"),this.logStep("client_select_begin"),b("Stratcom").invoke("MMultiPhotoUploader:input:click",null,{input:this.props.videoFileInput.getDOMElement()})},uploadAttachments:function(a){var c=this,d=a.getDOMElement().files;if(d.length===0){this.logStep("client_select_fail");return}var e=a.cloneDOMNode();a=this.props.maxPhotosAllowed>d.length?d.length:this.props.maxPhotosAllowed;a<d.length&&window.alert(h._("B\u1ea1n \u0111\u00e3 th\u00eam qu\u00e1 nhi\u1ec1u \u1ea3nh. B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c th\u00eam {maxPhotosAllowed} \u1ea3nh v\u00e0o m\u1ed9t b\u00e0i vi\u1ebft. \u0110\u1ec3 th\u00eam nhi\u1ec1u \u1ea3nh h\u01a1n, h\u00e3y th\u1eed t\u1ea1o album.",[h._param("maxPhotosAllowed",this.props.maxPhotosAllowed)]));var f=function(a){var f=d[a];if(f.name===""&&f.fileName===""&&f.size===0&&f.fileSize===0){c.logStep("client_select_fail");return"continue"}c.logStep("client_select_success");if(f.type.match("image.*")){var g="no_resize",h=m++;g=new(b("MPhotoUploadRequest"))().setAllowSphericalPhoto(!0).setAttachedFile(f).setDTSG(c.props.dtsg).setUploadDomain(c.props.uploadDomain).setResizeType(g);c.uploadAttachment(g,e,h,b("MMultiPhotoUploaderAttachmentType").PHOTO,f.size,c.props.useLocalFilePreview?URL.createObjectURL(f):null);b("MSphericalPhotoConfig").is_mtouch_basic_uploader_on&&b("Bootloader").loadModules(["SphericalImage"],function(a){b("promiseDone")(a.createFromBlob(f).then(function(a){return c.handleSphericalPhotoCheck(h,a)})["catch"](function(a){}))},"MMultiPhotoUploader.react")}else if(f.type.match("video.*")&&c.props.allowVideo){var i=m++;g=new(b("MVideoUploadRequest"))().setAccessToken(c.props.accessToken).setFileIndex(a);c.uploadAttachment(g,e,i,b("MMultiPhotoUploaderAttachmentType").VIDEO,f.size,null);c.props.useLocalFilePreview&&c.getVideoThumbnail(f,function(a){c.updateFileImageURI(i,a)})}};for(var g=0;g<a;g++){var i=f(g);if(i==="continue")continue}},uploadAttachment:function(a,c,d,e,f,g){var h=this.props.shouldShowLargeThumbnails?n:o,i=this.props,j=i.targetID;i=i.actorID;a=a.setClonedFileInput(c).setThumbnailDimensions(new(b("Vector"))(h,h)).setWaterfall(this.props.waterfallID,this.props.waterfallAppName,this.props.waterfallSource).setHandler(this.handleUploadSuccess.bind(this,d)).setErrorHandler(this.handleUploadError.bind(this,d)).setProgressHandler(this.handleUploadProgress.bind(this,d)).setTargetID(j&&b("intlNumUtils").parseNumber(j)).setActorID(i&&b("intlNumUtils").parseNumber(i)).send();this._pendingUploadRequests[d]=a;this.props.onUploadStarted&&this.props.onUploadStarted();this.allowSingleAttachment()&&this.clearAttachments();this.addAttachment({id:d,state:"sending",type:e,request:a,fileImageURI:g,loaded:0,totalSize:f});this.setCollapsed(!1)},handleSphericalPhotoCheck:function(a,b){a=this.getAttachment(a);this.updateAttachment(babelHelpers["extends"]({},a,{isSpherical:b&&b.isSpherical()}))},updateFileImageURI:function(a,b){a=this.getAttachment(a);this.updateAttachment(babelHelpers["extends"]({},a,{fileImageURI:b}))},handleUploadError:function(a){delete this._pendingUploadRequests[a];var b=this.getAttachment(a);this.updateAttachment({id:a,state:"error",request:b.request,isSpherical:b.isSpherical,type:b.type,fileImageURI:b.fileImageURI})},handleUploadProgress:function(a,b){var c=this.getAttachment(a);this.updateAttachment({id:a,state:c.state,request:c.request,loaded:b.loaded,totalSize:b.total,isSpherical:c.isSpherical,type:c.type,fileImageURI:c.fileImageURI});this._throttledProgressUpdate()},_invokeProgressUpdate:function(){var a=function(a,b){return a+b},c=this.attachments.map(function(a){return a.totalSize}).reduce(a);a=this.attachments.map(function(a){return a.loaded}).reduce(a);b("Stratcom").invoke("MMultiPhotoUploader:upload:progress",null,{totalLoaded:a,totalSize:c})},handleUploadSuccess:function(a,c){delete this._pendingUploadRequests[a];if(!c.fbid){this.handleUploadError(a);return}var d=this.getAttachment(a),e=d.type===b("MMultiPhotoUploaderAttachmentType").PHOTO&&this.props.startPollingTagSuggestionsCallback?b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS:b("MMultiPhotoUploaderAttachmentState").UPLOADED;this.updateAttachment({id:a,state:e,fbid:c.fbid,imageURI:c.thumbnail_uri,thumbnail_width:c.thumbnail_width,thumbnail_height:c.thumbnail_height,loaded:d.loaded,totalSize:d.totalSize,previewURI:c.preview_uri,isSpherical:d.isSpherical,type:d.type,fileImageURI:d.fileImageURI});e===b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS?this.props.startPollingTagSuggestionsCallback(c.fbid,a):this.props.onUploadSuccess&&this.props.onUploadSuccess(a,c.fbid)},onFaceBoxDataReceived:function(a){this.props.onUploadSuccess(a)},onPhotoPlusClick:function(a){this.props.fileInput.click(a)},onVideoPlusClick:function(a){this.props.videoFileInput&&this.props.videoFileInput.click(a)},onRemoveClick:function(a){var c=this.getAttachment(a),d=!1;(c.state===b("MMultiPhotoUploaderAttachmentState").SENDING||c.state===b("MMultiPhotoUploaderAttachmentState").ERROR)&&(d=confirm(h._("\u1ea2nh n\u00e0y ch\u01b0a t\u1ea3i l\u00ean \u0111\u01b0\u1ee3c. B\u1ea1n c\u00f3 mu\u1ed1n th\u1eed l\u1ea1i kh\u00f4ng?")));d?this.retryAttachment(a):this.removeAttachment(a)},UNSAFE_componentWillUpdate:function(){this.props.shouldScroll&&this.refs&&this.refs.scroller&&this.refs.scroller.checkShouldScrollToEnd()},componentDidUpdate:function(){this.resizeAndScroll()},renderHiddenInputs:function(){var a=this.state.attachments.filter(function(a){return(a.state===b("MMultiPhotoUploaderAttachmentState").UPLOADED||a.state===b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS)&&a.type===b("MMultiPhotoUploaderAttachmentType").PHOTO}).map(function(a){return a.fbid}),c=this.state.attachments.filter(function(a){return a.state===b("MMultiPhotoUploaderAttachmentState").UPLOADED&&a.type===b("MMultiPhotoUploaderAttachmentType").VIDEO}).map(function(a){return a.fbid});return k(l.jsx(b("MMultiPhotoUploaderHiddenInputs.react"),babelHelpers["extends"]({},this.props,{photo_fbids:a,video_fbids:c})),this.props.formHiddenInputs)},resizeAndScroll:function(){this.props.shouldScroll&&this.refs&&this.refs.scroller&&(this.refs.scroller.resizeScroller(),this.refs.scroller.scrollHorizontallyToEnd())},getPlusAttachment:function(){if(this.allowSingleAttachment()&&this.state.collapsed)return null;if(this.isMaxAttachmentReached())return null;return this.props.separatePhotoAndVideo&&this.props.videoFileInput?l.jsxs("span",{children:[l.jsx(b("MMultiPhotoUploaderPlusAttachment.react"),{onClick:this.onPhotoPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:!0}),l.jsx(b("MMultiPhotoUploaderPlusAttachment.react"),{onClick:this.onVideoPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddVideoLabel:!0,label:h._("Th\u00eam video")})]}):l.jsx(b("MMultiPhotoUploaderPlusAttachment.react"),{onClick:this.onPhotoPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:this.props.shouldShowAddPhotoLabel})},adjustScroller:function(){this.props.shouldScroll&&this.refs&&this.refs.scroller&&(this.refs.scroller.checkShouldScrollToEnd(),this.refs.scroller.resizeScroller(),this.refs.scroller.scrollHorizontallyToEnd())},getVideoThumbnail:function(a,c){var d=new FileReader();d.onload=function(){var e=new Blob([d.result],{type:a.type});e=URL.createObjectURL(e);var f=document.createElement("video"),g=function a(){h()&&(f.removeEventListener("timeupdate",a),f.pause())};b("MEvent").listen(f,"loadeddata",function(){var a=h();a&&f.removeEventListener("timeupdate",g);c(a)});var h=function(){var a=document.createElement("canvas");a.width=f.videoWidth;a.height=f.videoHeight;a.getContext("2d").drawImage(f,0,0,a.width,a.height);a=a.toDataURL();var b=a.length>1e4;return b?a:null};b("MEvent").listen(f,"timeupdate",g);f.preload="metadata";f.muted=!0;f.playsInline=!0;f.autoplay=!0;f.src=e};d.readAsArrayBuffer(a)},_renderImpl:function(){var a=this;if(this.state.collapsed)return l.jsx("div",{});var c=this.state.attachments.map(function(c){var d=a.props.shouldShowLargeThumbnails?n:o;return l.createElement(b("MMultiPhotoUploaderAttachment.react"),babelHelpers["extends"]({},c,{key:c.id,shouldShowLargeThumbnails:a.props.shouldShowLargeThumbnails,previewSize:d,useLocalFilePreview:a.props.useLocalFilePreview,shouldShowWhiteDesign:a.props.shouldShowWhiteDesign,onRemoveClick:function(){a.onRemoveClick(c.id)},onPreviewLoaded:function(){a.adjustScroller()},loaded:c.loaded,totalSize:c.totalSize,hideUploadProgress:a.props.hideUploadProgress,onThumbnailClicked:function(){a.props.onThumbnailClicked&&a.props.onThumbnailClicked(c)}}))}),d=this.props.shouldScroll&&this.state.attachments.length>1;if(d)if(!p)b("Bootloader").loadModules(["MMultiPhotoUploaderSimpleScroller"],function(b){p=b,a.forceUpdate()},"MMultiPhotoUploader.react");else return l.jsxs(p,{options:{scrollingY:!1},className:(this.props.shouldShowLargeThumbnails?"":"_1upb")+" _xy"+(this.props.showDropShadow?" _bgx":""),thumbnailSize:n,ref:"scroller",children:[c,this.getPlusAttachment()]});return l.jsxs("div",{className:"_5cqb"+(d?" _2nym":""),children:[c,this.getPlusAttachment()]})},render:function(){return l.jsxs(l.Fragment,{children:[this._renderImpl(),this.renderHiddenInputs()]})},getWaterfallID:function(){return this.props.waterfallID},getWaterfallAppName:function(){return this.props.waterfallAppName},getWaterfallSource:function(){return this.props.waterfallSource}});e.exports=a}),130);
__d("MMultiPhotoUploaderInitReact",["$","MComposerBackgroundUploadProgress","MDOM","MMultiPhotoUploader.react","MMultiPhotoUploaderAttachmentState","MPhotoUploadFileInput","ReactComponentRenderer_DEPRECATED","Run","Stratcom","StratcomManager","SubscriptionsHandler","URI","ge"],(function(a,b,c,d,e,f){var g,h="m-raw-file-input";a=function(){"use strict";function a(a,c){var d=this,e=a.previewGridElem||b("$")(a.previewGridId),f=a.targetFormElem||b("$")(a.targetFormId),i=a.inputId,j=a.inputContainerElem,k=a.containerClassName||null,l=null;if(j){j=b("MDOM").scry(j,"input",h)[0];j&&j.id===i&&(l=j)}l=l||b("$")(i);j=a.videoInputId?b("ge")(a.videoInputId):null;i=document.createElement("div");k!==null&&k.length!==0&&(i.className=k);b("MDOM").insertBefore(e,i);k=document.createElement("div");b("MDOM").appendContent(f,k);var m=new(b("MPhotoUploadFileInput"))(l);e=j?new(b("MPhotoUploadFileInput"))(j):null;this.$1=new(b("ReactComponentRenderer_DEPRECATED"))(b("MMultiPhotoUploader.react"),i,"MMultiPhotoUploaderInitReact.js");this.$1.setProps({fileInput:m,videoFileInput:e,formHiddenInputs:k,uploadDomain:new(g||(g=b("URI")))(a.uploadDomain),dtsg:a.dtsg,shouldResize:a.shouldResize,maxPhotosAllowed:a.maxPhotosAllowed,waterfallID:a.waterfallID,waterfallAppName:a.waterfallAppName,waterfallSource:a.waterfallSource,initCollapsed:a.initCollapsed,logFlowBeginOnClick:a.logFlowBeginOnClick,targetID:a.targetID,actorID:a.actorID,shouldScroll:a.horizontalScrolling,shouldShowLargeThumbnails:a.largeThumbnails,shouldShowWhiteDesign:a.useWhiteDesign,shouldShowAddPhotoLabel:a.showPhotoLabel,showDropShadow:a.composerDropShadow,disableIOS8SafariAlert:a.disableIOS8SafariAlert,initialPhotos:c,allowVideo:a.allowVideo,accessToken:a.accessToken,useLocalFilePreview:a.useLocalFilePreview,separatePhotoAndVideo:a.separatePhotoAndVideo,hideUploadProgress:a.hideUploadProgress});b("StratcomManager").enableDispatch(window,"reset");var n=new(b("SubscriptionsHandler"))();n.addSubscriptions(b("Stratcom").listen("reset",["id:"+a.targetFormId],function(){d.resetState()}),b("Stratcom").listen("MActorSelector-actorChange",null,function(b){b.getData().targetID===a.targetID&&(d.resetState(),d.$1.setProps({actorID:b.getData().actorID,maxPhotosAllowed:b.getData().maxPhotosAllowed}))}),b("Stratcom").listen("MStructuredComposer-canceled",null,function(){d.$1.getComponent_DEPRECATED().isCollapsed()||d.$1.getComponent_DEPRECATED().logStep("client_flow_cancel",{volume:d.$1.getComponent_DEPRECATED().getAttachmentCount()})}));b("Run").onLeave(function(){if(b("MComposerBackgroundUploadProgress").isRunning())return;d.$1.unmount();m.destroy();n.release()})}var c=a.prototype;c.logClientPost=function(a){this.$1.getComponent_DEPRECATED().logStep("client_flow_post",{volume:this.$1.getComponent_DEPRECATED().getAttachmentCount()},a)};c.alterPreviewGrid=function(a){return this.$1.getComponent_DEPRECATED().setCollapsed(!a)};c.getUploader=function(){return this.$1};c.resetState=function(){this.$1.getComponent_DEPRECATED().clearAttachments();return this.alterPreviewGrid(!1)};c.collapseUploader=function(){this.$1.getComponent_DEPRECATED()&&this.$1.getComponent_DEPRECATED().setCollapsed(!0)};c.hasPhotos=function(a){a===void 0&&(a=!1);return this.$1.getComponent_DEPRECATED().numAttachmentsWithState(b("MMultiPhotoUploaderAttachmentState").UPLOADED)>0||!b("MComposerBackgroundUploadProgress").isWaitingForTagSuggestions()&&this.hasPollingPhotos()||a&&this.hasPendingPhotos()};c.hasPendingPhotos=function(){return this.$1.getComponent_DEPRECATED().numAttachmentsWithState(b("MMultiPhotoUploaderAttachmentState").SENDING)>0||b("MComposerBackgroundUploadProgress").isWaitingForTagSuggestions()&&this.hasPollingPhotos()};c.numAttachmentsOfType=function(a){return this.$1.getComponent_DEPRECATED().numAttachmentsOfType(a)};c.hasPollingPhotos=function(){return this.$1.getComponent_DEPRECATED().numAttachmentsWithState(b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS)>0};c.getUploadedMediaCount=function(){return this.$1.getComponent_DEPRECATED().numAttachmentsWithState(b("MMultiPhotoUploaderAttachmentState").UPLOADED)+this.$1.getComponent_DEPRECATED().numAttachmentsWithState(b("MMultiPhotoUploaderAttachmentState").POLLING_TAG_SUGGESTIONS)};c.getMediaCount=function(){return this.$1.getComponent_DEPRECATED().getAttachmentCount()};c.uploadPhotos=function(a){this.$1.getComponent_DEPRECATED().uploadPhotos(a)};return a}();e.exports=a}),null);
__d("fbjs/lib/shallowEqual",["shallowEqual"],(function(a,b,c,d,e,f){"use strict";e.exports=b("shallowEqual")}),null);
__d("shallowCompare",["fbjs/lib/shallowEqual"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return!b("fbjs/lib/shallowEqual")(a.props,c)||!b("fbjs/lib/shallowEqual")(a.state,d)}f["default"]=a}),66);
__d("ReactComponentWithPureRenderMixin",["shallowCompare"],(function(a,b,c,d,e,f){"use strict";a={shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)}};c=a;f["default"]=c}),66);
__d("XStickerPackImagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/{pack_id}/images/",{pack_id:{type:"Int",required:!0},sticker_size:{type:"Int",defaultValue:50}})}),null);
__d("MStickerPack.react",["cx","fbt","ix","Grid.react","Image.react","MRequest","MStickersInitialData","MURI","ReactComponentWithPureRenderMixin","ShimButton.react","ThisControllerNoLongerExists","XStickerPackImagesController","createReactClass_DEPRECATED","debounceCore","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||b("react"),l=b("Grid.react").GridItem,m=b("MStickersInitialData").MRU_STICKER_PACK,n=14,o={};a=b("createReactClass_DEPRECATED")({displayName:"MStickerPack",mixins:[b("ReactComponentWithPureRenderMixin")],getInitialState:function(){return{input:"",loading:!1,searching:!1,stickers:[]}},getDefaultProps:function(){return{isComments:!1}},UNSAFE_componentWillMount:function(){this._debouncedGetStickersForQuery=b("debounceCore")(this.getStickersForQuery,500),this.getStickers(this.props.pack.id)},UNSAFE_componentWillReceiveProps:function(a){this.getStickers(a.pack.id)},componentWillUnmount:function(){this._debouncedGetStickersForQuery.reset()},updateRecentlyUsed:function(a){var c=o[m]||[];for(var d=0;d<c.length;++d)if(c[d].id===a.id){c.splice(d,1);break}c.unshift(a);o[m]||(o[m]=c,b("MStickersInitialData").packs.unshift(b("MStickersInitialData").mru))},getStickers:function(a){var c=this;if(!a||a==b("MStickersInitialData").SEARCH_PACK)return;if(a in o){this.setState({input:"",loading:!1,stickers:o[a],searching:!1});return}var d=b("XStickerPackImagesController").getURIBuilder().setInt("pack_id",a).getURI();d=new(b("MRequest"))(new(b("MURI"))(d));d.listen("done",function(b){o[a]=b.payload,c.isMounted()&&c.setState({input:"",loading:!1,stickers:b.payload,searching:!1})});this.setState({loading:!0});d.send()},getStickersForQuery:function(a,c){var d=this;if(a.length===0){this.setState({loading:!1,searching:!1});return}if(a!=this.state.input&&!c)return;c=b("ThisControllerNoLongerExists").__DEADURI__("i5bdl49r5");c=new(b("MRequest"))(new(b("MURI"))(c));c.listen("done",function(b){b=b.payload||[];d.isMounted()&&a==d.state.input&&d.setState({loading:!1,stickers:b,searching:!0})});this.setState({loading:!0});c.send()},selectSticker:function(a){this.updateRecentlyUsed(a),this.props.onSelect&&this.props.onSelect(a.id)},renderSticker:function(a,c){var d=null;if(this.props.isComments&&!a.isCommentsCapable){if(this.props.pack.id==b("MStickersInitialData").MRU_STICKER_PACK)return}else if(!this.props.isComments&&!a.isMessengerCapable){if(this.props.pack.id==b("MStickersInitialData").MRU_STICKER_PACK)return}else d=this.selectSticker.bind(this,a);var e=null;this.props.isFlyout&&(e="composer-submit");a=k.jsx(b("Image.react"),{src:a.uri,alt:h._("Nh\u00e3n d\u00e1n {pack name} {sticker name}",[h._param("pack name",a.packName),h._param("sticker name",a.accessibilityLabel)])});return k.jsx("button",{className:"_5asg","data-testid":void 0,"data-sigil":e,onClick:d,role:"button",children:a},"sticker-"+c)},_getRenderedFakeStickers:function(){return Array.from(new Array(n),function(a,b){return k.jsx("div",{className:"_u2_"},"fake-"+b)})},_getRenderedStickerGridItems:function(){return this.state.stickers.map(this.renderSticker).concat(this._getRenderedFakeStickers())},render:function(){if(this.props.pack.id==b("MStickersInitialData").SEARCH_PACK)return k.jsxs("div",{className:"_5ash",children:[k.jsxs("div",{className:"_5ef_",children:[this._renderSearch(),this._renderTags(),this._renderStickerSearchResults()]}),this._renderLoading()]});return this.state.loading?k.jsx("div",{className:"_5ash",children:this._renderLoading()}):k.jsxs("div",{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?" _5jkg":""),onScroll:this.props.onScroll,children:[k.jsx("div",{className:"_5ef_",onScroll:this._onScroll,children:this._getRenderedStickerGridItems()}),this.renderMask()]})},_renderLoading:function(){return!this.state.loading?null:k.jsx("span",{className:"_5asi",children:h._("\u0110ang t\u1ea3i...")})},_renderStickerSearchResults:function(){if(!this.state.searching||this.state.loading)return null;return this.state.stickers.length===0?k.jsxs("div",{className:"_4op9",children:[k.jsx(b("Image.react"),{src:i("87146")}),k.jsx("p",{children:h._("Kh\u00f4ng c\u00f3 nh\u00e3n d\u00e1n \u0111\u1ec3 hi\u1ec3n th\u1ecb")})]}):k.jsxs("div",{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?" _5jkg":""),onScroll:this.props.onScroll,children:[k.jsx("div",{className:"_5ef_",children:this._getRenderedStickerGridItems()}),this.renderMask()]})},renderMask:function(){return!(this.props.isComments&&!this.props.pack.isCommentsCapable)?null:k.jsx("div",{className:"_5jkh",children:k.jsx("div",{className:"_5jki",children:h._("G\u00f3i n\u00e0y ch\u1ec9 c\u00f3 trong tin nh\u1eafn")})})},_renderSearch:function(){return k.jsxs("div",{className:"_2j-l",children:[k.jsx("span",{className:"_2j-m"}),this._renderCloseButton(),k.jsx("div",{className:"_4opa",children:k.jsx("input",{className:"_2j-n",onChange:this._inputChanged,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,ref:"stickerQuery",value:this.state.input,placeholder:h._("T\u00ecm ki\u1ebfm nh\u00e3n d\u00e1n"),type:"text"})})]})},_renderCloseButton:function(){if(this.state.input.length>0)return k.jsx(b("ShimButton.react"),{className:"_4opb",inline:!0,onClick:this._clearInput})},_renderTags:function(){var a=this;if(this.state.searching||this.state.loading)return null;var c=b("MStickersInitialData").tags.filter(function(a){return a.sourceURI!==null}).sort(function(a,b){return a.order-b.order}).map(function(c,d){return k.jsx(l,{className:"_2j-o",children:k.jsx("div",{className:"_2j-p",children:k.jsxs(b("ShimButton.react"),{className:"_2j-q",onClick:a._selectTag.bind(a,c),style:{background:"#"+c.color_code},children:[k.jsx(b("Image.react"),{src:c.sourceURI}),k.jsx("span",{children:c.name})]})})},d)});return k.jsx(b("Grid.react"),{className:"_2j-r",cols:2,fixed:!0,ref:"grid",children:c})},_inputChanged:function(a){this.setState({input:a.target.value}),this._debouncedGetStickersForQuery(a.target.value,!1)},_clearInput:function(){this.setState({input:"",loading:!1,searching:!1})},_selectTag:function(a){this.setState({input:a.name}),this.getStickersForQuery(a.name,!0)}});e.exports=a}),130);
__d("MStickerPackButton.react",["cx","Image.react","MStickersInitialData","ShimButton.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||b("react");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.onClick=function(){c.props.onclick&&c.props.onclick(c.props.pack)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a="_5arz _5cni"+(this.props.selected?" _5ar-":"")+(this.props.disabled?" _4f39":""),c=this.props.pack,d;c.id==b("MStickersInitialData").MRU_STICKER_PACK?d=i.jsx("span",{className:"_3rsg"}):c.id==b("MStickersInitialData").SEARCH_PACK?d=i.jsx("span",{className:"_cmr"}):d=i.jsx(b("Image.react"),{src:c.icon,alt:c.name});c=c.id==b("MStickersInitialData").SEARCH_PACK?null:"MStickersWebDriverIDsStickerNonsearchPackButton";return i.jsx(b("ShimButton.react"),{className:a,"data-testid":void 0,form:"link",onClick:this.onClick,rel:"ignore",children:i.jsx("div",{className:"_3pcz",children:d})})};return c}(i.PureComponent);e.exports=a}),null);
__d("XStickerStorePermalinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/",{tab:{type:"String"},redirect_uri:{type:"String"},is_comments:{type:"Bool",defaultValue:!1}})}),null);
__d("MStickerSelector.react",["cx","fbt","BanzaiLogger","MDOM","MPageController","MParent","MStickerPack.react","MStickerPackButton.react","MStickersInitialData","MViewport","ReactDOM_DEPRECATED","Stratcom","SubscriptionsHandler","UserAgent","XStickerStorePermalinkController","getActiveElement","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||b("react"),k="feed-ufi-comments",l="scroll-area";a=48;var m=5*a;c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=null;d.onPackSelect=function(a){b("BanzaiLogger").log("MTouchStickersLoggerConfig",{event:"select_pack",packid:a.id}),d.setState({selectedPack:a})};d.onPackScroll=function(){d.state.selectedPack&&d.state.selectedPack.id!=d.$2&&(d.$2=d.state.selectedPack.id,b("BanzaiLogger").log("MTouchStickersLoggerConfig",{event:"scroll_pack",packid:d.state.selectedPack.id}))};d.onInputFocus=function(){d.setState({inputFocused:!0})};d.onInputBlur=function(){d.setState({inputFocused:!1})};d.scrollPrev=function(){if(!d.state.prevDisabled){var a=Math.max(d.state.scrollLeft-m,0);d.setState({scrollLeft:a,prevDisabled:a===0,nextDisabled:!1})}};d.scrollNext=function(){if(!d.state.nextDisabled){var a=b("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(d.refs.selectorRow);a=a.scrollWidth-a.parentNode.clientWidth;a=Math.min(d.state.scrollLeft+m,a);d.setState({scrollLeft:a,prevDisabled:!1,nextDisabled:d.$3(a)})}};d.$3=function(a){var c=b("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(d.refs.selectorRow);c=c.scrollWidth-c.parentNode.clientWidth;return a>=c};d.renderPack=function(c,a){return j.jsx(b("MStickerPackButton.react"),{disabled:d.props.isComments&&!c.isCommentsCapable||!d.props.isComments&&!c.isMessengerCapable,onclick:d.onPackSelect,pack:c,selected:c.id==d.state.selectedPack.id},"pack-"+a)};d.renderIndicator=function(){return!b("MStickersInitialData").storeIndicator?null:j.jsx("div",{className:"_5e-s"})};d.$5=function(){return j.jsx("a",{"aria-label":h._("G\u00f3i nh\u00e3n d\u00e1n tr\u01b0\u1edbc"),className:"_5cni _5abu",disabled:d.state.prevDisabled,href:"#",onClick:d.scrollPrev,ref:"prevButton",rel:"ignore",role:"button",children:j.jsx("span",{className:"_5abw"})})};d.$6=function(){return j.jsx("a",{"aria-label":h._("G\u00f3i nh\u00e3n d\u00e1n ti\u1ebfp theo"),className:"_5cni _5abx",disabled:d.state.nextDisabled,href:"#",onClick:d.scrollNext,ref:"nextButton",rel:"ignore",role:"button",children:j.jsx("span",{className:"_5aby"})})};d.$7=function(){d.setState({nextDisabled:d.$3(d.state.scrollLeft)})};d.$4=function(a){a=b("getActiveElement")();a&&a.blur()};d.$8=function(){if(d.$1)return;var a=b("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(d.refs.root);if(!a)return;if(b("MParent").bySigil(a,l)){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("MDOM").listen(a,"touchmove",null,function(a){a.stop()}),b("Stratcom").listen("m:page:unload",null,function(){d.$9()}));b("MParent").bySigil(a,k)&&c.addSubscriptions(b("Stratcom").listen("m:feed-ufi-flyout:reset",null,function(){d.$9()}));d.$1=c}};d.$9=function(){d.$1&&d.$1.release(),d.$1=null};var e=null;if(b("MStickersInitialData").packs&&b("MStickersInitialData").packs.length)for(var f=0;f<b("MStickersInitialData").packs.length;f++)if(!c.isComments&&b("MStickersInitialData").packs[f].isMessengerCapable||c.isComments&&b("MStickersInitialData").packs[f].isCommentsCapable){e=b("MStickersInitialData").packs[f];break}d.state={selectedPack:e,prevDisabled:!0,nextDisabled:!1,scrollLeft:0};return d}var d=c.prototype;d.render=function(){if(!this.props.isOpen)return null;var a=b("MStickersInitialData").packs.length===0?j.jsx("div",{className:"_5ar_",children:h._("Kh\u00f4ng c\u00f3 nh\u00e3n d\u00e1n n\u00e0o kh\u1ea3 d\u1ee5ng")}):j.jsx(b("MStickerPack.react"),{pack:this.state.selectedPack,onSelect:this.props.callback,onScroll:this.onPackScroll,onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur,isComments:this.props.isComments,isFlyout:this.props.isFlyout}),c=b("MStickersInitialData").packs,d=[];for(var e=0;e<c.length;e++)c[e]&&(this.props.isComments&&c[e].isCommentsCapable?d.push(c[e]):c[e].isMessengerCapable&&d.push(c[e]));c=d;c=c.map(this.renderPack,this);e=b("XStickerStorePermalinkController").getURIBuilder().setString("redirect_uri",b("MPageController").getRenderedPath()).setBool("is_comments",this.props.isComments).getURI();d=null;this.props.showStore&&(d=j.jsxs("a",{className:"_5cni _5b3_",href:e.toString(),children:[j.jsx("span",{className:"_5b40"}),this.renderIndicator()]}));e=b("UserAgent").isPlatform("Android <2.4");return j.jsx("div",{className:this.props.className,"data-testid":void 0,ref:"root",children:j.jsxs("div",{className:"_5as0"+(e?" _2-n8":""),ref:"selector",children:[j.jsx("div",{className:"_5as1",onScroll:this.state.inputFocused?this.$4:null,children:a}),j.jsx("div",{className:"_5as2",ref:"selectorRow",style:{marginLeft:-this.state.scrollLeft},children:j.jsx("div",{className:"_5as5",children:c})}),this.$5(),this.$6(),d]})})};d.componentDidMount=function(){this.props.isOpen&&(this.$8(),this.$7())};d.componentWillUnmount=function(){this.$9()};d.componentDidUpdate=function(a,c){if(this.props.isOpen){a.isOpen||this.$8();if(this.state.selectedPack!=c.selectedPack||this.props.isOpen!=a.isOpen){c=b("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.selector);b("MParent").bySigil(c,k)?b("Stratcom").invoke("MStickerSelector:show-sticker-selector",null,{selectorNode:c}):b("MViewport").scrollToNodeIfNecessary(b("ReactDOM_DEPRECATED").findDOMNode_DEPRECATED(this.refs.selector))}this.props.isOpen!=a.isOpen&&(this.$7(),b("BanzaiLogger").log("MTouchStickersLoggerConfig",{event:"open_tray"}))}else a.isOpen&&this.$9()};return c}(j.Component);c.defaultProps={isComments:!0,showStore:!0};e.exports=c}),130);
__d("MStickerSelectorButton.react",["cx","fbt","ix","Image.react","prop-types","react","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){var j,k=j||b("react");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isSelected:c.props.isSelected},c.onClick=function(a){c.setState({isSelected:!c.state.isSelected}),c.props.onClick&&c.props.onClick(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillUpdate=function(a,c){b("shallowEqual")(this.props,a)||this.setState({isSelected:a.isSelected}),this.props.onToggle&&c!==this.state&&this.props.onToggle(c.isSelected)};d.render=function(){var a;!this.state.isSelected?a=i("90727"):a=i("90728");return k.jsxs("button",{"aria-label":h._("Th\u00eam nh\u00e3n d\u00e1n"),type:"button",className:"_5ecn _1n29 _2fv6","data-sigil":"touchable",onClick:this.onClick,children:[k.jsx(b("Image.react"),{src:a,className:"_2fv7"}),k.jsx(b("Image.react"),{src:this.state.isSelected?i("432358"):i("432368"),className:"_2fv8"})]})};return c}(k.Component);a.propTypes={onToggle:b("prop-types").func,isSelected:b("prop-types").bool};a.defaultProps={isSelected:!1};e.exports=a}),130);
__d("ReactComponentRenderer",["ReactDOM","react","warning"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");a=function(){function a(a,b){this.$1=a,this.$2=d("ReactDOM").createRoot(b),this.$3={}}var b=a.prototype;b.setProps=function(a){var b=this.$1;if(b==null)return;Object.assign(this.$3,a);a=i.jsx(b,babelHelpers["extends"]({},this.$3));this.$2.render(a)};b.unmount=function(){this.$2.unmount(),this.$1=null};return a}();g["default"]=a}),98);
__d("MStickerMount",["$","BanzaiLogger","ClientIDs","MAjaxify","MCommentStatusLogger","MDOM","MRequest","MStickerSelector.react","MStickerSelectorButton.react","ReactComponentRenderer","Run","Stratcom","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";var g="m-textarea-input",h=function(a,c,d,e){var f=new(b("MRequest"))(a.action);f.setMethod("POST");f.addData({client_id:b("ClientIDs").getNewClientID(),sticker_id:c});var g=b("MDOM").convertFormToDictionary(a);g.privacy_value&&f.addData({privacy_value:g.privacy_value});if(d){g=b("MCommentStatusLogger").newInteractionKey();b("MCommentStatusLogger").logInitAndSubmitSticker(g,c);f.addData({logging_interaction_key:g});j(g)}b("MAjaxify").ajaxify(null,a,f,"async_composer");b("Stratcom").invoke("m:ufi:sticker-comment",null,{textInput:e})},i=function(a,c,d,e,f,g,h){h===void 0&&(h=!1);var i,j=new(b("ReactComponentRenderer"))(b("MStickerSelector.react"),c);j.setProps({callback:e,isComments:f,onClose:function(){j&&j.setProps({isOpen:!1}),i&&i.setProps({isSelected:!1})},showStore:g,isFlyout:h});i=new(b("ReactComponentRenderer"))(b("MStickerSelectorButton.react"),a);i.setProps({onToggle:function(a){j.setProps({isOpen:a})}});var k=new(b("SubscriptionsHandler"))();k.addSubscriptions(b("MDOM").listen(d,"focus",null,function(){i.setProps({isSelected:!1})}),b("Stratcom").listen("m:ufi:sticker-comment",null,function(){i.setProps({isSelected:!1})}));b("Run").onLeave(function(){k.release(),i.unmount(),j.unmount()})};function j(a){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Stratcom").listen("m:ufi:live-comments:render",null,function(d){d=d.getData()||{};d=d.logKeys;d&&d.forEach(function(d){d===a&&(b("MCommentStatusLogger").logRender(a),c.release())})}),b("Stratcom").listen("m:ufi:iui:comment-added",null,function(d){d=d.getData().loggingInteractionKey;d===a&&(b("MCommentStatusLogger").logRender(a),c.release())}),b("Stratcom").listen("m:page:unload",null,function(){c.release()}));return c}a={initMessages:function(a,c,d,e){var f=b("$")(d);d=function(a){var c=f.form,d=b("MDOM").convertFormToDictionary(c);d.sticker_id=a;e.sendRequest(c.action,d)};i(a,c,f,d,!1,!0)},initCommentsFlyout:function(a,c,d,e,f){f===void 0&&(f=!1);var i=null;e&&(b("Stratcom").hasSigil(e,g)?i=e:i=b("MDOM").scry(e,"*",g)[0]);i||(i=b("$")(d));var j=i.form;c.onclick=function(){h(j,a,f,i),b("BanzaiLogger").log("NullStateCommentsLoggerConfig",{event:"sticker_selection",sticker_id:a.toString()})}},initComments:function(a,c,d,e,f,j){f===void 0&&(f=!1);j===void 0&&(j=!1);var k=null;e&&(b("Stratcom").hasSigil(e,g)?k=e:k=b("MDOM").scry(e,"*",g)[0]);k||(k=b("$")(d));var l=k.form;e=function(a){h(l,a,f,k)};i(a,c,k,e,!0,!0,j)},initNewMessage:function(a,b,c,d){var e=function(a){d.sendSticker(a)};i(a,b,c,e,!1,!1)}};e.exports=a}),null);
__d("MUFISutro",["cx","MCSS"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){a=document.getElementById(a);a&&c("MCSS").addClass(a,"_2a_l")}g.commentRepliesExpanded=a}),98);